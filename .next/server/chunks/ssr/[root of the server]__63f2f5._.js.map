{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AAEA;AAHA;;;;;;AAKA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,sMAAM,UAAU,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,sMAAM,UAAU,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2WACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,sMAAM,UAAU,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,yDACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,sMAAM,UAAU,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,sMAAM,UAAU,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,sMAAM,UAAU,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/hooks/useToast.ts"],"sourcesContent":["import * as React from \"react\";\n\nimport type { ToastActionElement, ToastProps } from \"@/components/ui/toast\";\n\nconst TOAST_LIMIT = 1;\nconst TOAST_REMOVE_DELAY = 1000000;\n\ntype ToasterToast = ToastProps & {\n  id: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  action?: ToastActionElement;\n};\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const;\n\nlet count = 0;\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_VALUE;\n  return count.toString();\n}\n\ntype ActionType = typeof actionTypes;\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"];\n      toast: ToasterToast;\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"];\n      toast: Partial<ToasterToast>;\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"];\n      toastId?: ToasterToast[\"id\"];\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"];\n      toastId?: ToasterToast[\"id\"];\n    };\n\ninterface State {\n  toasts: ToasterToast[];\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: actionTypes.REMOVE_TOAST,\n      toastId: toastId,\n    });\n  }, TOAST_REMOVE_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case actionTypes.ADD_TOAST:\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case actionTypes.UPDATE_TOAST:\n      return {\n        ...state,\n        toasts: state.toasts.map(t =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      };\n\n    case actionTypes.DISMISS_TOAST: {\n      const { toastId } = action;\n\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach(toast => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map(t =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      };\n    }\n    case actionTypes.REMOVE_TOAST:\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter(t => t.id !== action.toastId),\n      };\n  }\n};\n\nconst listeners: Array<(state: State) => void> = [];\n\nlet memoryState: State = { toasts: [] };\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach(listener => {\n    listener(memoryState);\n  });\n}\n\ntype Toast = Omit<ToasterToast, \"id\">;\n\nfunction toast({ ...props }: Toast) {\n  const id = genId();\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: actionTypes.UPDATE_TOAST,\n      toast: { ...props, id },\n    });\n  const dismiss = () =>\n    dispatch({ type: actionTypes.DISMISS_TOAST, toastId: id });\n\n  dispatch({\n    type: actionTypes.ADD_TOAST,\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open: boolean) => {\n        if (!open) dismiss();\n      },\n    },\n  });\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  };\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState);\n\n  React.useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) =>\n      dispatch({ type: actionTypes.DISMISS_TOAST, toastId }),\n  };\n}\n\nexport { useToast, toast };\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/stores/chatStore.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport interface Message {\n  id: string;\n  role: \"user\" | \"assistant\" | \"system\";\n  content: string;\n  timestamp: Date;\n  isVoice?: boolean;\n  contexts?: string[];\n}\n\nexport interface ChatState {\n  messages: Message[];\n  isLoading: boolean;\n  isVoiceActive: boolean;\n  isMuted: boolean;\n  error: string | null;\n  currentTranscript: string;\n\n  // Actions\n  addMessage: (message: Omit<Message, \"id\" | \"timestamp\">) => void;\n  updateMessage: (id: string, content: string) => void;\n  deleteMessage: (id: string) => void;\n  clearMessages: () => void;\n  setLoading: (loading: boolean) => void;\n  setVoiceActive: (active: boolean) => void;\n  setMuted: (muted: boolean) => void;\n  setError: (error: string | null) => void;\n  setCurrentTranscript: (transcript: string) => void;\n}\n\nconst useChatStore = create<ChatState>(set => ({\n  messages: [\n    {\n      id: uuidv4(),\n      role: \"assistant\",\n      content:\n        \"Hello! I'm your Aven support assistant. I can help you with questions about our credit card, balance transfers, rewards program, account management, and more. How can I assist you today?\",\n      timestamp: new Date(),\n      isVoice: false,\n    },\n  ],\n  isLoading: false,\n  isVoiceActive: false,\n  isMuted: false,\n  error: null,\n  currentTranscript: \"\",\n\n  addMessage: message =>\n    set(state => ({\n      messages: [\n        ...state.messages,\n        {\n          ...message,\n          id: uuidv4(),\n          timestamp: new Date(),\n        },\n      ],\n    })),\n\n  updateMessage: (id, content) =>\n    set(state => ({\n      messages: state.messages.map(msg =>\n        msg.id === id ? { ...msg, content } : msg\n      ),\n    })),\n\n  deleteMessage: id =>\n    set(state => ({\n      messages: state.messages.filter(msg => msg.id !== id),\n    })),\n\n  clearMessages: () =>\n    set(() => ({\n      messages: [\n        {\n          id: uuidv4(),\n          role: \"assistant\",\n          content:\n            \"Hello! I'm your Aven support assistant. How can I help you today?\",\n          timestamp: new Date(),\n          isVoice: false,\n        },\n      ],\n      error: null,\n      currentTranscript: \"\",\n    })),\n\n  setLoading: loading => set(() => ({ isLoading: loading })),\n\n  setVoiceActive: active => set(() => ({ isVoiceActive: active })),\n\n  setMuted: muted => set(() => ({ isMuted: muted })),\n\n  setError: error => set(() => ({ error })),\n\n  setCurrentTranscript: transcript =>\n    set(() => ({ currentTranscript: transcript })),\n}));\n\nexport default useChatStore;\n"],"names":[],"mappings":";;;AAAA;AACA;;;AA+BA,MAAM,eAAe,CAAA,GAAA,wJAAA,CAAA,SAAM,AAAD,EAAa,CAAA,MAAO,CAAC;QAC7C,UAAU;YACR;gBACE,IAAI,CAAA,GAAA,kLAAA,CAAA,KAAM,AAAD;gBACT,MAAM;gBACN,SACE;gBACF,WAAW,IAAI;gBACf,SAAS;YACX;SACD;QACD,WAAW;QACX,eAAe;QACf,SAAS;QACT,OAAO;QACP,mBAAmB;QAEnB,YAAY,CAAA,UACV,IAAI,CAAA,QAAS,CAAC;oBACZ,UAAU;2BACL,MAAM,QAAQ;wBACjB;4BACE,GAAG,OAAO;4BACV,IAAI,CAAA,GAAA,kLAAA,CAAA,KAAM,AAAD;4BACT,WAAW,IAAI;wBACjB;qBACD;gBACH,CAAC;QAEH,eAAe,CAAC,IAAI,UAClB,IAAI,CAAA,QAAS,CAAC;oBACZ,UAAU,MAAM,QAAQ,CAAC,GAAG,CAAC,CAAA,MAC3B,IAAI,EAAE,KAAK,KAAK;4BAAE,GAAG,GAAG;4BAAE;wBAAQ,IAAI;gBAE1C,CAAC;QAEH,eAAe,CAAA,KACb,IAAI,CAAA,QAAS,CAAC;oBACZ,UAAU,MAAM,QAAQ,CAAC,MAAM,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;gBACpD,CAAC;QAEH,eAAe,IACb,IAAI,IAAM,CAAC;oBACT,UAAU;wBACR;4BACE,IAAI,CAAA,GAAA,kLAAA,CAAA,KAAM,AAAD;4BACT,MAAM;4BACN,SACE;4BACF,WAAW,IAAI;4BACf,SAAS;wBACX;qBACD;oBACD,OAAO;oBACP,mBAAmB;gBACrB,CAAC;QAEH,YAAY,CAAA,UAAW,IAAI,IAAM,CAAC;oBAAE,WAAW;gBAAQ,CAAC;QAExD,gBAAgB,CAAA,SAAU,IAAI,IAAM,CAAC;oBAAE,eAAe;gBAAO,CAAC;QAE9D,UAAU,CAAA,QAAS,IAAI,IAAM,CAAC;oBAAE,SAAS;gBAAM,CAAC;QAEhD,UAAU,CAAA,QAAS,IAAI,IAAM,CAAC;oBAAE;gBAAM,CAAC;QAEvC,sBAAsB,CAAA,aACpB,IAAI,IAAM,CAAC;oBAAE,mBAAmB;gBAAW,CAAC;IAChD,CAAC;uCAEc"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/chat/ChatMessage.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { User, Bot, Mic } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport ReactMarkdown from \"react-markdown\";\nimport { Message } from \"@/stores/chatStore\";\n\ninterface ChatMessageProps {\n  message: Message;\n}\n\nexport default function ChatMessage({ message }: ChatMessageProps) {\n  const isUser = message.role === \"user\";\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3 }}\n      className={`flex ${isUser ? \"justify-end\" : \"justify-start\"}`}\n    >\n      <div\n        className={`flex max-w-[80%] gap-3 ${isUser ? \"flex-row-reverse\" : \"flex-row\"}`}\n      >\n        {/* Avatar */}\n        <div\n          className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\n            isUser ? \"bg-blue-600\" : \"bg-indigo-600\"\n          }`}\n        >\n          {isUser ? (\n            <User className=\"h-5 w-5 text-white\" />\n          ) : (\n            <Bot className=\"h-5 w-5 text-white\" />\n          )}\n        </div>\n\n        {/* Message Content */}\n        <div\n          className={`flex flex-col ${isUser ? \"items-end\" : \"items-start\"}`}\n        >\n          <div\n            className={`rounded-lg px-4 py-2 ${\n              isUser ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-900\"\n            }`}\n          >\n            <div className=\"prose prose-sm max-w-none\">\n              <ReactMarkdown\n                className={isUser ? \"text-white\" : \"text-gray-900\"}\n                components={{\n                  p: ({ children }) => (\n                    <p className=\"mb-2 last:mb-0\">{children}</p>\n                  ),\n                  ul: ({ children }) => (\n                    <ul className=\"list-disc pl-4 mb-2\">{children}</ul>\n                  ),\n                  ol: ({ children }) => (\n                    <ol className=\"list-decimal pl-4 mb-2\">{children}</ol>\n                  ),\n                  li: ({ children }) => <li className=\"mb-1\">{children}</li>,\n                  strong: ({ children }) => (\n                    <strong className=\"font-semibold\">{children}</strong>\n                  ),\n                  a: ({ href, children }) => (\n                    <a\n                      href={href}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"underline hover:no-underline\"\n                    >\n                      {children}\n                    </a>\n                  ),\n                }}\n              >\n                {message.content}\n              </ReactMarkdown>\n            </div>\n          </div>\n\n          {/* Metadata */}\n          <div className=\"flex items-center gap-2 mt-1 px-1\">\n            <span className=\"text-xs text-gray-500\">\n              {new Date(message.timestamp).toLocaleTimeString([], {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n              })}\n            </span>\n            {message.isVoice && <Mic className=\"h-3 w-3 text-gray-500\" />}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;AAIA;AADA;AAAA;AAEA;AAFA;AAHA;;;;;AAYe,SAAS,YAAY,EAAE,OAAO,EAAoB;IAC/D,MAAM,SAAS,QAAQ,IAAI,KAAK;IAEhC,qBACE,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,UAAU;QAAI;QAC5B,WAAW,CAAC,KAAK,EAAE,SAAS,gBAAgB,iBAAiB;kBAE7D,cAAA,8OAAC;YACC,WAAW,CAAC,uBAAuB,EAAE,SAAS,qBAAqB,YAAY;;8BAG/E,8OAAC;oBACC,WAAW,CAAC,oEAAoE,EAC9E,SAAS,gBAAgB,iBACzB;8BAED,uBACC,8OAAC,kMAAA,CAAA,OAAI;wBAAC,WAAU;;;;;6CAEhB,8OAAC,gMAAA,CAAA,MAAG;wBAAC,WAAU;;;;;;;;;;;8BAKnB,8OAAC;oBACC,WAAW,CAAC,cAAc,EAAE,SAAS,cAAc,eAAe;;sCAElE,8OAAC;4BACC,WAAW,CAAC,qBAAqB,EAC/B,SAAS,2BAA2B,6BACpC;sCAEF,cAAA,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,wLAAA,CAAA,UAAa;oCACZ,WAAW,SAAS,eAAe;oCACnC,YAAY;wCACV,GAAG,CAAC,EAAE,QAAQ,EAAE,iBACd,8OAAC;gDAAE,WAAU;0DAAkB;;;;;;wCAEjC,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,8OAAC;gDAAG,WAAU;0DAAuB;;;;;;wCAEvC,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,8OAAC;gDAAG,WAAU;0DAA0B;;;;;;wCAE1C,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,8OAAC;gDAAG,WAAU;0DAAQ;;;;;;wCAC5C,QAAQ,CAAC,EAAE,QAAQ,EAAE,iBACnB,8OAAC;gDAAO,WAAU;0DAAiB;;;;;;wCAErC,GAAG,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,iBACpB,8OAAC;gDACC,MAAM;gDACN,QAAO;gDACP,KAAI;gDACJ,WAAU;0DAET;;;;;;oCAGP;8CAEC,QAAQ,OAAO;;;;;;;;;;;;;;;;sCAMtB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAU;8CACb,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;wCAClD,MAAM;wCACN,QAAQ;oCACV;;;;;;gCAED,QAAQ,OAAO,kBAAI,8OAAC,gMAAA,CAAA,MAAG;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM/C"}},
    {"offset": {"line": 691, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 697, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/chat/SuggestedQuestions.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { HelpCircle, CreditCard, TrendingUp, Shield } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\ninterface SuggestedQuestionsProps {\n  onSelectQuestion: (question: string) => void;\n}\n\nconst suggestions = [\n  {\n    icon: CreditCard,\n    text: \"How does the Aven credit card work?\",\n    color: \"text-blue-600\",\n  },\n  {\n    icon: TrendingUp,\n    text: \"What are the balance transfer terms?\",\n    color: \"text-green-600\",\n  },\n  {\n    icon: Shield,\n    text: \"How do I apply for an Aven card?\",\n    color: \"text-purple-600\",\n  },\n  {\n    icon: HelpCircle,\n    text: \"What rewards does Aven offer?\",\n    color: \"text-orange-600\",\n  },\n];\n\nexport default function SuggestedQuestions({\n  onSelectQuestion,\n}: SuggestedQuestionsProps) {\n  return (\n    <div className=\"space-y-2\">\n      <p className=\"text-sm text-gray-600 font-medium\">Popular questions:</p>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n        {suggestions.map((suggestion, index) => {\n          const Icon = suggestion.icon;\n          return (\n            <motion.div\n              key={index}\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <Button\n                variant=\"outline\"\n                className=\"w-full justify-start text-left hover:bg-gray-50 p-3 h-auto\"\n                onClick={() => onSelectQuestion(suggestion.text)}\n              >\n                <Icon\n                  className={`h-4 w-4 mr-2 flex-shrink-0 ${suggestion.color}`}\n                />\n                <span className=\"text-sm\">{suggestion.text}</span>\n              </Button>\n            </motion.div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AALA;;;;;AAWA,MAAM,cAAc;IAClB;QACE,MAAM,kNAAA,CAAA,aAAU;QAChB,MAAM;QACN,OAAO;IACT;IACA;QACE,MAAM,kNAAA,CAAA,aAAU;QAChB,MAAM;QACN,OAAO;IACT;IACA;QACE,MAAM,sMAAA,CAAA,SAAM;QACZ,MAAM;QACN,OAAO;IACT;IACA;QACE,MAAM,kNAAA,CAAA,aAAU;QAChB,MAAM;QACN,OAAO;IACT;CACD;AAEc,SAAS,mBAAmB,EACzC,gBAAgB,EACQ;IACxB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAE,WAAU;0BAAoC;;;;;;0BACjD,8OAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,YAAY;oBAC5B,MAAM,OAAO,WAAW,IAAI;oBAC5B,qBACE,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;wBAET,SAAS;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAG;wBAC9B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,YAAY;4BAAE,OAAO,QAAQ;wBAAI;kCAEjC,cAAA,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,WAAU;4BACV,SAAS,IAAM,iBAAiB,WAAW,IAAI;;8CAE/C,8OAAC;oCACC,WAAW,CAAC,2BAA2B,EAAE,WAAW,KAAK,EAAE;;;;;;8CAE7D,8OAAC;oCAAK,WAAU;8CAAW,WAAW,IAAI;;;;;;;;;;;;uBAbvC;;;;;gBAiBX;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 806, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 820, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/utils/logger.ts"],"sourcesContent":["/* eslint-disable */\n\nconst isServer = typeof window === \"undefined\";\n\nexport class Logger {\n  private context: string;\n  private isServerContext: boolean;\n  private colors = {\n    reset: \"\\x1b[0m\",\n    red: \"\\x1b[31m\",\n    yellow: \"\\x1b[33m\",\n    blue: \"\\x1b[34m\",\n    gray: \"\\x1b[90m\",\n    bold: \"\\x1b[1m\",\n    magenta: \"\\x1b[35m\",\n  };\n\n  constructor(context: string) {\n    this.context = context;\n    this.isServerContext = isServer;\n  }\n\n  private shouldLog(): boolean {\n    // Always log server-side actions\n    if (this.isServerContext) return true;\n    // Only log client-side in development\n    return process.env.NODE_ENV === \"development\";\n  }\n\n  private formatMessage(level: string, message: string, data?: any) {\n    const timestamp = new Date().toISOString();\n    const environment = this.isServerContext ? \"[SERVER]\" : \"[CLIENT]\";\n    const prefix = `${timestamp} ${environment} ${this.context}:`;\n    return { prefix, message, ...(data && { data }) };\n  }\n\n  private colorize(color: keyof typeof this.colors, text: string): string {\n    // Only apply colors on the server side where they work\n    if (!this.isServerContext) return text;\n    return `${this.colors[color]}${text}${this.colors.reset}`;\n  }\n\n  private formatLogLevel(level: string): string {\n    return `[${level.toUpperCase()}]`;\n  }\n\n  private formatOutput({\n    prefix,\n    message,\n    data,\n  }: {\n    prefix: string;\n    message: string;\n    data?: any;\n  }) {\n    const logParts = [prefix, message];\n    if (data) {\n      logParts.push(\"\\n\" + JSON.stringify(data, null, 2));\n    }\n    return logParts.join(\" \");\n  }\n\n  info(message: string, data?: any) {\n    if (!this.shouldLog()) return;\n    const formattedData = this.formatMessage(\"info\", message, data);\n    console.log(\n      this.colorize(\"blue\", this.formatLogLevel(\"info\")) +\n        \" \" +\n        this.formatOutput(formattedData)\n    );\n  }\n\n  error(message: string, error?: Error | unknown, data?: any) {\n    if (!this.shouldLog()) return;\n    const errorData =\n      error instanceof Error\n        ? { name: error.name, message: error.message, stack: error.stack }\n        : error;\n\n    const formattedData = this.formatMessage(\"error\", message, {\n      ...data,\n      error: errorData,\n    });\n\n    console.error(\n      this.colorize(\"red\", this.colors.bold + this.formatLogLevel(\"error\")) +\n        \" \" +\n        this.formatOutput(formattedData)\n    );\n  }\n\n  warn(message: string, data?: any) {\n    if (!this.shouldLog()) return;\n    const formattedData = this.formatMessage(\"warn\", message, data);\n    console.warn(\n      this.colorize(\"yellow\", this.formatLogLevel(\"warn\")) +\n        \" \" +\n        this.formatOutput(formattedData)\n    );\n  }\n\n  debug(message: string, data?: any) {\n    if (!this.shouldLog()) return;\n    const formattedData = this.formatMessage(\"debug\", message, data);\n    console.debug(\n      this.colorize(\"gray\", this.formatLogLevel(\"debug\")) +\n        \" \" +\n        this.formatOutput(formattedData)\n    );\n  }\n\n  // New method specifically for server actions\n  action(message: string, data?: any) {\n    if (!this.shouldLog()) return;\n    const formattedData = this.formatMessage(\"action\", message, data);\n    console.log(\n      this.colorize(\"magenta\", this.formatLogLevel(\"action\")) +\n        \" \" +\n        this.formatOutput(formattedData)\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 911, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/config/env.ts"],"sourcesContent":["import { z } from \"zod\";\nimport { Logger } from \"@/utils/logger\";\n\nconst logger = new Logger(\"Config:Env\");\n\n// Schema for environment variables\nconst envSchema = z.object({\n  NODE_ENV: z.string().default(\"development\"),\n  NEXT_PUBLIC_APP_URL: z.string().default(\"http://localhost:3000\"),\n\n  // OpenAI Configuration\n  OPENAI_API_KEY: z.string().optional(),\n\n  // Pinecone Configuration\n  PINECONE_API_KEY: z.string().optional(),\n  PINECONE_ENVIRONMENT: z.string().optional(),\n  PINECONE_INDEX_NAME: z.string().default(\"aven-knowledge-base\"),\n\n  // Exa (web search/scraping) Configuration\n  EXA_API_KEY: z.string().optional(),\n  EXA_BASE_URL: z.string().default(\"https://api.exa.ai\"),\n\n  // Vapi Configuration\n  VAPI_API_KEY: z.string().optional(),\n  NEXT_PUBLIC_VAPI_PUBLIC_KEY: z.string().optional(),\n  NEXT_PUBLIC_VAPI_ASSISTANT_ID: z.string().optional(),\n});\n\n// Function to validate environment variables\nconst validateEnv = () => {\n  try {\n    logger.info(\"Validating environment variables\");\n    const env = {\n      NODE_ENV: process.env.NODE_ENV,\n      NEXT_PUBLIC_APP_URL: process.env.NEXT_PUBLIC_APP_URL,\n      OPENAI_API_KEY: process.env.OPENAI_API_KEY,\n      PINECONE_API_KEY: process.env.PINECONE_API_KEY,\n      PINECONE_ENVIRONMENT: process.env.PINECONE_ENVIRONMENT,\n      PINECONE_INDEX_NAME: process.env.PINECONE_INDEX_NAME,\n      EXA_API_KEY: process.env.EXA_API_KEY,\n      EXA_BASE_URL: process.env.EXA_BASE_URL || \"https://api.exa.ai\",\n      VAPI_API_KEY: process.env.VAPI_API_KEY,\n      NEXT_PUBLIC_VAPI_PUBLIC_KEY: process.env.NEXT_PUBLIC_VAPI_PUBLIC_KEY,\n      NEXT_PUBLIC_VAPI_ASSISTANT_ID: process.env.NEXT_PUBLIC_VAPI_ASSISTANT_ID,\n    };\n    const parsed = envSchema.parse(env);\n    logger.info(\"Environment variables validated successfully\");\n    return parsed;\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const missingVars = error.errors.map((err) => err.path.join(\".\"));\n      logger.error(\"Invalid environment variables\", { error: { missingVars } });\n      console.warn(\n        `⚠️ Missing optional environment variables: ${missingVars.join(\n          \", \"\n        )}. Some features may not work properly.`\n      );\n      // Return partial env with defaults\n      return envSchema.parse({\n        NODE_ENV: process.env.NODE_ENV || \"development\",\n        NEXT_PUBLIC_APP_URL:\n          process.env.NEXT_PUBLIC_APP_URL || \"http://localhost:3000\",\n        OPENAI_API_KEY: process.env.OPENAI_API_KEY || \"\",\n        PINECONE_API_KEY: process.env.PINECONE_API_KEY || \"\",\n        PINECONE_ENVIRONMENT: process.env.PINECONE_ENVIRONMENT || \"\",\n        PINECONE_INDEX_NAME:\n          process.env.PINECONE_INDEX_NAME || \"aven-knowledge-base\",\n        EXA_API_KEY: process.env.EXA_API_KEY || \"\",\n        EXA_BASE_URL: process.env.EXA_BASE_URL || \"https://api.exa.ai\",\n        VAPI_API_KEY: process.env.VAPI_API_KEY || \"\",\n        NEXT_PUBLIC_VAPI_PUBLIC_KEY:\n          process.env.NEXT_PUBLIC_VAPI_PUBLIC_KEY || \"\",\n        NEXT_PUBLIC_VAPI_ASSISTANT_ID:\n          process.env.NEXT_PUBLIC_VAPI_ASSISTANT_ID || \"\",\n      });\n    }\n    throw error;\n  }\n};\n\nexport const env = validateEnv();\n"],"names":[],"mappings":";;;AACA;AADA;;;AAGA,MAAM,SAAS,IAAI,sHAAA,CAAA,SAAM,CAAC;AAE1B,mCAAmC;AACnC,MAAM,YAAY,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACzB,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IAC7B,qBAAqB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IAExC,uBAAuB;IACvB,gBAAgB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAEnC,yBAAyB;IACzB,kBAAkB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACrC,sBAAsB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzC,qBAAqB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IAExC,0CAA0C;IAC1C,aAAa,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,cAAc,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IAEjC,qBAAqB;IACrB,cAAc,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACjC,6BAA6B,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAChD,+BAA+B,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AACpD;AAEA,6CAA6C;AAC7C,MAAM,cAAc;IAClB,IAAI;QACF,OAAO,IAAI,CAAC;QACZ,MAAM,MAAM;YACV,QAAQ;YACR,qBAAqB,QAAQ,GAAG,CAAC,mBAAmB;YACpD,gBAAgB,QAAQ,GAAG,CAAC,cAAc;YAC1C,kBAAkB,QAAQ,GAAG,CAAC,gBAAgB;YAC9C,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB;YACtD,qBAAqB,QAAQ,GAAG,CAAC,mBAAmB;YACpD,aAAa,QAAQ,GAAG,CAAC,WAAW;YACpC,cAAc,QAAQ,GAAG,CAAC,YAAY,IAAI;YAC1C,cAAc,QAAQ,GAAG,CAAC,YAAY;YACtC,6BAA6B,QAAQ,GAAG,CAAC,2BAA2B;YACpE,+BAA+B,QAAQ,GAAG,CAAC,6BAA6B;QAC1E;QACA,MAAM,SAAS,UAAU,KAAK,CAAC;QAC/B,OAAO,IAAI,CAAC;QACZ,OAAO;IACT,EAAE,OAAO,OAAO;QACd,IAAI,iBAAiB,oIAAA,CAAA,IAAC,CAAC,QAAQ,EAAE;YAC/B,MAAM,cAAc,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,MAAQ,IAAI,IAAI,CAAC,IAAI,CAAC;YAC5D,OAAO,KAAK,CAAC,iCAAiC;gBAAE,OAAO;oBAAE;gBAAY;YAAE;YACvE,QAAQ,IAAI,CACV,CAAC,2CAA2C,EAAE,YAAY,IAAI,CAC5D,MACA,sCAAsC,CAAC;YAE3C,mCAAmC;YACnC,OAAO,UAAU,KAAK,CAAC;gBACrB,UAAU,mDAAwB;gBAClC,qBACE,QAAQ,GAAG,CAAC,mBAAmB,IAAI;gBACrC,gBAAgB,QAAQ,GAAG,CAAC,cAAc,IAAI;gBAC9C,kBAAkB,QAAQ,GAAG,CAAC,gBAAgB,IAAI;gBAClD,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB,IAAI;gBAC1D,qBACE,QAAQ,GAAG,CAAC,mBAAmB,IAAI;gBACrC,aAAa,QAAQ,GAAG,CAAC,WAAW,IAAI;gBACxC,cAAc,QAAQ,GAAG,CAAC,YAAY,IAAI;gBAC1C,cAAc,QAAQ,GAAG,CAAC,YAAY,IAAI;gBAC1C,6BACE,QAAQ,GAAG,CAAC,2BAA2B,IAAI;gBAC7C,+BACE,QAAQ,GAAG,CAAC,6BAA6B,IAAI;YACjD;QACF;QACA,MAAM;IACR;AACF;AAEO,MAAM,MAAM"}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 997, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/data/aven-knowledge.ts"],"sourcesContent":["export interface AvenKnowledge {\n  id: string;\n  category: string;\n  topic: string;\n  content: string;\n  metadata?: Record<string, string | number | boolean>;\n}\n\nexport const avenKnowledgeBase: AvenKnowledge[] = [\n  // Company Overview\n  {\n    id: \"aven-001\",\n    category: \"company\",\n    topic: \"About Aven\",\n    content:\n      \"Aven is a revolutionary fintech company that helps people save money while paying off credit card debt. We provide intelligent credit solutions that empower individuals to take control of their financial future. Founded in 2023, Aven has quickly become a trusted partner for thousands of users looking to reduce their debt burden and improve their financial health.\",\n  },\n  {\n    id: \"aven-002\",\n    category: \"company\",\n    topic: \"Mission\",\n    content:\n      \"Aven's mission is to democratize access to smart financial tools and help millions of Americans escape the cycle of credit card debt. We believe everyone deserves fair and transparent financial services that actually work in their favor, not against them.\",\n  },\n  {\n    id: \"aven-003\",\n    category: \"company\",\n    topic: \"Values\",\n    content:\n      \"Our core values include transparency, customer empowerment, financial inclusion, and innovation. We're committed to providing clear, honest information about all our products and services, with no hidden fees or surprise charges.\",\n  },\n\n  // Products and Services\n  {\n    id: \"aven-004\",\n    category: \"products\",\n    topic: \"Aven Credit Card\",\n    content:\n      \"The Aven Credit Card is designed specifically for people paying off debt. It offers 0% APR on balance transfers for 21 months, no annual fee, and smart spending controls to help you avoid adding new debt while paying off existing balances. The card also provides cashback rewards on essential purchases like groceries and gas.\",\n  },\n  {\n    id: \"aven-005\",\n    category: \"products\",\n    topic: \"Balance Transfer\",\n    content:\n      \"Aven offers one of the longest 0% APR balance transfer periods in the industry - 21 months. There's a one-time balance transfer fee of 3% or $5, whichever is greater. You can transfer balances from multiple cards, up to your approved credit limit. The balance transfer must be completed within 60 days of account opening.\",\n  },\n  {\n    id: \"aven-006\",\n    category: \"products\",\n    topic: \"Cashback Rewards\",\n    content:\n      \"Earn 3% cashback on groceries, 2% on gas and transportation, and 1% on all other purchases. There's no limit to the cashback you can earn, and rewards never expire. Cashback can be redeemed as a statement credit, direct deposit to your bank account, or applied directly to your balance.\",\n  },\n  {\n    id: \"aven-007\",\n    category: \"products\",\n    topic: \"Debt Management Tools\",\n    content:\n      \"Aven provides free debt management tools including a debt payoff calculator, personalized payoff plans, spending insights, and budget tracking. Our AI-powered recommendations help you optimize your payment strategy to save the most on interest and pay off debt faster.\",\n  },\n\n  // Features and Benefits\n  {\n    id: \"aven-008\",\n    category: \"features\",\n    topic: \"Smart Notifications\",\n    content:\n      \"Get intelligent alerts about your spending, payment due dates, and opportunities to save money. Our system learns your patterns and provides personalized insights to help you stay on track with your financial goals.\",\n  },\n  {\n    id: \"aven-009\",\n    category: \"features\",\n    topic: \"Financial Education\",\n    content:\n      \"Access our comprehensive library of financial education resources, including articles, videos, and interactive tools. Topics cover credit score improvement, budgeting basics, debt reduction strategies, and long-term financial planning.\",\n  },\n  {\n    id: \"aven-010\",\n    category: \"features\",\n    topic: \"Mobile App\",\n    content:\n      \"The Aven mobile app is available for iOS and Android. Features include instant balance checks, payment scheduling, spending categorization, virtual card numbers for online shopping, and biometric security. The app has a 4.8-star rating with over 10,000 reviews.\",\n  },\n\n  // Account Management\n  {\n    id: \"aven-011\",\n    category: \"account\",\n    topic: \"Eligibility Requirements\",\n    content:\n      \"To apply for an Aven Credit Card, you must be 18 years or older, have a valid Social Security number, have a US mailing address, and have a credit score of at least 670. We perform a hard credit inquiry during the application process.\",\n  },\n  {\n    id: \"aven-012\",\n    category: \"account\",\n    topic: \"Application Process\",\n    content:\n      \"The application process takes about 5 minutes online. You'll need to provide personal information, employment details, and income verification. Most decisions are instant, though some applications may require additional review within 7-10 business days. Once approved, your card arrives within 7-10 business days.\",\n  },\n  {\n    id: \"aven-013\",\n    category: \"account\",\n    topic: \"Credit Limits\",\n    content:\n      \"Credit limits range from $1,000 to $25,000 based on your creditworthiness and income. You can request a credit limit increase after 6 months of on-time payments. Automatic reviews for credit limit increases occur every 6 months.\",\n  },\n  {\n    id: \"aven-014\",\n    category: \"account\",\n    topic: \"Payment Options\",\n    content:\n      \"Make payments through the mobile app, online portal, automatic payments, phone payments, or mail. We accept payments from checking accounts, savings accounts, and debit cards. Credit card payments from other cards are not accepted. Payments made before 5 PM ET on business days are credited the same day.\",\n  },\n\n  // Fees and Rates\n  {\n    id: \"aven-015\",\n    category: \"fees\",\n    topic: \"Fee Structure\",\n    content:\n      \"No annual fee, no over-limit fees, no foreign transaction fees. Balance transfer fee: 3% or $5 minimum. Cash advance fee: 5% or $10 minimum. Late payment fee: up to $40. Returned payment fee: up to $40.\",\n  },\n  {\n    id: \"aven-016\",\n    category: \"fees\",\n    topic: \"Interest Rates\",\n    content:\n      \"0% intro APR on balance transfers for 21 months, then 14.99% - 24.99% variable APR based on creditworthiness. 0% intro APR on purchases for 12 months, then the same variable APR applies. Cash advance APR: 26.99% variable, applied immediately with no grace period.\",\n  },\n\n  // Customer Support\n  {\n    id: \"aven-017\",\n    category: \"support\",\n    topic: \"Contact Options\",\n    content:\n      \"24/7 phone support at 1-800-AVEN-HLP (1-800-283-6457). Live chat available on website and mobile app from 8 AM to 11 PM ET. Email support at support@aven.com with response within 24 hours. In-app messaging for account-specific questions.\",\n  },\n  {\n    id: \"aven-018\",\n    category: \"support\",\n    topic: \"Lost or Stolen Card\",\n    content:\n      \"Report lost or stolen cards immediately through the app or by calling 1-800-AVEN-HLP. We'll freeze your card instantly and send a replacement via expedited shipping at no charge. You won't be liable for unauthorized charges made after you report the card missing.\",\n  },\n  {\n    id: \"aven-019\",\n    category: \"support\",\n    topic: \"Dispute Process\",\n    content:\n      \"File disputes for unauthorized or incorrect charges through the app or online portal. We'll issue a provisional credit within 2 business days while investigating. Most disputes are resolved within 30 days. You'll receive written confirmation of the resolution.\",\n  },\n\n  // Security and Privacy\n  {\n    id: \"aven-020\",\n    category: \"security\",\n    topic: \"Security Features\",\n    content:\n      \"Bank-level 256-bit encryption, two-factor authentication, biometric login options, real-time fraud monitoring, instant card freeze/unfreeze, virtual card numbers for online shopping, and zero liability protection for unauthorized charges.\",\n  },\n  {\n    id: \"aven-021\",\n    category: \"security\",\n    topic: \"Privacy Policy\",\n    content:\n      \"We never sell your personal information to third parties. Data is used only to provide services, improve products, and comply with legal requirements. You can request your data or deletion at any time. We're compliant with CCPA, GDPR, and all federal privacy regulations.\",\n  },\n\n  // FAQs\n  {\n    id: \"aven-022\",\n    category: \"faq\",\n    topic: \"How long does balance transfer take?\",\n    content:\n      \"Balance transfers typically complete within 5-7 business days, though some may take up to 14 days depending on the issuing bank. Continue making minimum payments on your old card until the transfer is confirmed complete.\",\n  },\n  {\n    id: \"aven-023\",\n    category: \"faq\",\n    topic: \"Can I transfer multiple balances?\",\n    content:\n      \"Yes, you can transfer balances from multiple cards as long as the total doesn't exceed your credit limit. Each transfer is processed separately and may complete at different times.\",\n  },\n  {\n    id: \"aven-024\",\n    category: \"faq\",\n    topic: \"Does applying hurt my credit score?\",\n    content:\n      \"We perform a hard credit inquiry during the application process, which may temporarily lower your credit score by a few points. However, consolidating debt with our card can improve your credit utilization ratio and potentially increase your score over time.\",\n  },\n  {\n    id: \"aven-025\",\n    category: \"faq\",\n    topic: \"What happens after the intro APR period?\",\n    content:\n      \"After the 21-month intro period for balance transfers (or 12 months for purchases), the variable APR of 14.99% - 24.99% applies to any remaining balance. We'll notify you 45 days before the intro period ends.\",\n  },\n  {\n    id: \"aven-026\",\n    category: \"faq\",\n    topic: \"Can I increase my credit limit?\",\n    content:\n      \"You can request a credit limit increase after 6 months of on-time payments through the app or online portal. We also automatically review accounts every 6 months for potential increases. Requests may result in a soft or hard credit inquiry.\",\n  },\n  {\n    id: \"aven-027\",\n    category: \"faq\",\n    topic: \"Is there a penalty APR?\",\n    content:\n      \"No, Aven does not charge penalty APRs. Your rate remains the same even if you miss a payment, though late fees may apply. We believe in helping you succeed, not penalizing you when you're struggling.\",\n  },\n\n  // Special Programs\n  {\n    id: \"aven-028\",\n    category: \"programs\",\n    topic: \"Financial Hardship Program\",\n    content:\n      \"If you're experiencing financial hardship, we offer payment deferrals, reduced interest rates, and modified payment plans. Contact our hardship team at 1-800-AVEN-HLP to discuss options. We're here to help you through difficult times.\",\n  },\n  {\n    id: \"aven-029\",\n    category: \"programs\",\n    topic: \"Refer a Friend\",\n    content:\n      \"Earn $50 for each friend who's approved for an Aven card through your referral link. Your friend also gets a $50 bonus after their first purchase. There's no limit to how many friends you can refer.\",\n  },\n  {\n    id: \"aven-030\",\n    category: \"programs\",\n    topic: \"Credit Score Monitoring\",\n    content:\n      \"Free FICO score updates monthly, credit report monitoring with alerts for changes, personalized tips to improve your score, and credit score simulator to see impact of financial decisions. All included at no extra charge with your Aven card.\",\n  },\n];\n\n// Helper function to search knowledge base\nexport function searchKnowledge(query: string): AvenKnowledge[] {\n  const lowercaseQuery = query.toLowerCase();\n  return avenKnowledgeBase.filter(\n    (item) =>\n      item.content.toLowerCase().includes(lowercaseQuery) ||\n      item.topic.toLowerCase().includes(lowercaseQuery) ||\n      item.category.toLowerCase().includes(lowercaseQuery)\n  );\n}\n\n// Get knowledge by category\nexport function getKnowledgeByCategory(category: string): AvenKnowledge[] {\n  return avenKnowledgeBase.filter((item) => item.category === category);\n}\n\n// Get all categories\nexport function getCategories(): string[] {\n  return [...new Set(avenKnowledgeBase.map((item) => item.category))];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1206, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1300, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/lib/embeddings.ts"],"sourcesContent":["import OpenAI from \"openai\";\nimport type { ChatCompletionMessageParam } from \"openai/resources/chat/completions\";\nimport { env } from \"@/config/env\";\nimport { Logger } from \"@/utils/logger\";\n\nconst logger = new Logger(\"Embeddings\");\n\nlet openaiClient: OpenAI | null = null;\n\nfunction getOpenAIClient(): OpenAI | null {\n  if (!env.OPENAI_API_KEY) {\n    logger.warn(\"OpenAI API key not configured\");\n    return null;\n  }\n\n  if (!openaiClient) {\n    openaiClient = new OpenAI({\n      apiKey: env.OPENAI_API_KEY,\n    });\n    logger.info(\"OpenAI client initialized\");\n  }\n\n  return openaiClient;\n}\n\nexport async function createEmbedding(text: string): Promise<number[] | null> {\n  const client = getOpenAIClient();\n  if (!client) {\n    logger.warn(\"Cannot create embedding - OpenAI client not available\");\n    return null;\n  }\n\n  try {\n    const response = await client.embeddings.create({\n      model: \"text-embedding-3-small\",\n      input: text,\n    });\n\n    const embedding = response.data[0].embedding;\n    logger.debug(`Created embedding for text (${text.length} chars)`);\n    return embedding;\n  } catch (error) {\n    logger.error(\"Failed to create embedding\", { error });\n    return null;\n  }\n}\n\nexport async function createEmbeddings(\n  texts: string[]\n): Promise<number[][] | null> {\n  const client = getOpenAIClient();\n  if (!client) {\n    logger.warn(\"Cannot create embeddings - OpenAI client not available\");\n    return null;\n  }\n\n  try {\n    const response = await client.embeddings.create({\n      model: \"text-embedding-3-small\",\n      input: texts,\n    });\n\n    const embeddings = response.data.map((item) => item.embedding);\n    logger.info(`Created ${embeddings.length} embeddings`);\n    return embeddings;\n  } catch (error) {\n    logger.error(\"Failed to create embeddings\", { error });\n    return null;\n  }\n}\n\nexport async function generateResponse(\n  prompt: string,\n  context?: string,\n  model: string = \"gpt-4-turbo-preview\"\n): Promise<string | null> {\n  const client = getOpenAIClient();\n  if (!client) {\n    logger.warn(\"Cannot generate response - OpenAI client not available\");\n    return null;\n  }\n\n  try {\n    const systemMessage = `You are an AI customer support agent for Aven, a fintech company that helps people save money while paying off credit card debt. \n    Be helpful, professional, and empathetic. Use the provided context to answer questions accurately.\n    If you don't have specific information, provide general guidance and suggest contacting Aven support.`;\n\n    const messages: ChatCompletionMessageParam[] = [\n      { role: \"system\", content: systemMessage },\n    ];\n\n    if (context) {\n      messages.push({\n        role: \"system\",\n        content: `Relevant information from our knowledge base:\\n${context}`,\n      });\n    }\n\n    messages.push({ role: \"user\", content: prompt });\n\n    const response = await client.chat.completions.create({\n      model,\n      messages,\n      temperature: 0.7,\n      max_tokens: 500,\n    });\n\n    const generatedText = response.choices[0].message.content;\n    logger.debug(\"Generated response from OpenAI\");\n    return generatedText;\n  } catch (error) {\n    logger.error(\"Failed to generate response\", { error });\n    return null;\n  }\n}\n\n// Chunk text for better embedding quality\nexport function chunkText(text: string, maxLength: number = 1000): string[] {\n  const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];\n  const chunks: string[] = [];\n  let currentChunk = \"\";\n\n  for (const sentence of sentences) {\n    if ((currentChunk + sentence).length <= maxLength) {\n      currentChunk += sentence;\n    } else {\n      if (currentChunk) chunks.push(currentChunk.trim());\n      currentChunk = sentence;\n    }\n  }\n\n  if (currentChunk) chunks.push(currentChunk.trim());\n  return chunks;\n}\n\n// Calculate cosine similarity between two vectors\nexport function cosineSimilarity(a: number[], b: number[]): number {\n  if (a.length !== b.length) {\n    throw new Error(\"Vectors must have the same length\");\n  }\n\n  let dotProduct = 0;\n  let normA = 0;\n  let normB = 0;\n\n  for (let i = 0; i < a.length; i++) {\n    dotProduct += a[i] * b[i];\n    normA += a[i] * a[i];\n    normB += b[i] * b[i];\n  }\n\n  return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1443, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1449, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/lib/pinecone.ts"],"sourcesContent":["import { Pinecone } from \"@pinecone-database/pinecone\";\nimport { env } from \"@/config/env\";\nimport { Logger } from \"@/utils/logger\";\n\nconst logger = new Logger(\"Pinecone\");\n\nlet pineconeClient: Pinecone | null = null;\n\nexport async function getPineconeClient(): Promise<Pinecone | null> {\n  if (!env.PINECONE_API_KEY) {\n    logger.warn(\"Pinecone API key not configured\");\n    return null;\n  }\n\n  if (!pineconeClient) {\n    try {\n      pineconeClient = new Pinecone({\n        apiKey: env.PINECONE_API_KEY,\n      });\n      logger.info(\"Pinecone client initialized successfully\");\n    } catch (error) {\n      logger.error(\"Failed to initialize Pinecone client\", { error });\n      return null;\n    }\n  }\n\n  return pineconeClient;\n}\n\nexport async function getIndex(indexName?: string) {\n  const client = await getPineconeClient();\n  if (!client) {\n    throw new Error(\"Pinecone client not available\");\n  }\n\n  const name = indexName || env.PINECONE_INDEX_NAME;\n\n  try {\n    const index = client.index(name);\n    logger.info(`Connected to Pinecone index: ${name}`);\n    return index;\n  } catch (error) {\n    logger.error(`Failed to connect to index ${name}`, { error });\n    throw error;\n  }\n}\n\nexport type VectorMetadata = {\n  id: string;\n  text: string;\n  category: string;\n  topic: string;\n  [key: string]: string | number | boolean;\n};\n\nexport async function upsertVectors(\n  vectors: { id: string; values: number[]; metadata: VectorMetadata }[],\n  indexName?: string\n) {\n  try {\n    const index = await getIndex(indexName);\n    const response = await index.upsert(vectors);\n    logger.info(`Upserted ${vectors.length} vectors to Pinecone`);\n    return response;\n  } catch (error) {\n    logger.error(\"Failed to upsert vectors\", { error });\n    throw error;\n  }\n}\n\nexport async function queryVectors(\n  queryVector: number[],\n  topK: number = 5,\n  filter?: Record<string, string | number | boolean>,\n  indexName?: string\n) {\n  try {\n    const index = await getIndex(indexName);\n    const queryResponse = await index.query({\n      vector: queryVector,\n      topK,\n      includeMetadata: true,\n      filter,\n    });\n\n    logger.info(\n      `Queried Pinecone, found ${queryResponse.matches?.length || 0} matches`\n    );\n    return queryResponse;\n  } catch (error) {\n    logger.error(\"Failed to query vectors\", { error });\n    throw error;\n  }\n}\n\nexport async function deleteAllVectors(indexName?: string) {\n  try {\n    const index = await getIndex(indexName);\n    await index.deleteAll();\n    logger.info(\"Deleted all vectors from Pinecone index\");\n  } catch (error) {\n    logger.error(\"Failed to delete vectors\", { error });\n    throw error;\n  }\n}\n\nexport async function createIndex(\n  indexName: string,\n  dimension: number = 1536, // Default for OpenAI embeddings\n  metric: \"cosine\" | \"euclidean\" | \"dotproduct\" = \"cosine\"\n) {\n  const client = await getPineconeClient();\n  if (!client) {\n    throw new Error(\"Pinecone client not available\");\n  }\n\n  try {\n    const indexes = await client.listIndexes();\n    const indexExists = indexes.indexes?.some(\n      index => index.name === indexName\n    );\n\n    if (indexExists) {\n      logger.info(`Index ${indexName} already exists`);\n      return;\n    }\n\n    await client.createIndex({\n      name: indexName,\n      dimension,\n      metric,\n      spec: {\n        serverless: {\n          cloud: \"aws\",\n          region: \"us-west-2\",\n        },\n      },\n    });\n\n    logger.info(`Created Pinecone index: ${indexName}`);\n\n    // Wait for index to be ready\n    await new Promise(resolve => setTimeout(resolve, 5000));\n  } catch (error) {\n    logger.error(`Failed to create index ${indexName}`, { error });\n    throw error;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1578, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/lib/rag.ts"],"sourcesContent":["import { avenKnowledgeBase } from \"@/data/aven-knowledge\";\nimport { createEmbedding, generateResponse } from \"@/lib/embeddings\";\nimport {\n  queryVectors,\n  upsertVectors,\n  createIndex,\n  VectorMetadata,\n} from \"@/lib/pinecone\";\nimport { Logger } from \"@/utils/logger\";\n\nconst logger = new Logger(\"RAG\");\n\n// Initialize the knowledge base in Pinecone\nexport async function initializeKnowledgeBase() {\n  try {\n    logger.info(\"Initializing Aven knowledge base in Pinecone\");\n\n    // Create index if it doesn't exist\n    await createIndex(\"aven-knowledge-base\");\n\n    // Prepare vectors\n    const vectors: {\n      id: string;\n      values: number[];\n      metadata: VectorMetadata;\n    }[] = [];\n\n    for (const item of avenKnowledgeBase) {\n      const embedding = await createEmbedding(item.content);\n      if (embedding) {\n        vectors.push({\n          id: item.id,\n          values: embedding,\n          metadata: {\n            id: item.id,\n            text: item.content,\n            category: item.category || \"general\",\n            topic: item.topic || \"general\",\n          },\n        });\n      }\n    }\n\n    if (vectors.length > 0) {\n      // Upsert vectors in batches to avoid rate limits\n      const batchSize = 100;\n      for (let i = 0; i < vectors.length; i += batchSize) {\n        const batch = vectors.slice(i, i + batchSize);\n        await upsertVectors(batch);\n        logger.info(\n          `Uploaded batch ${Math.floor(i / batchSize) + 1} of ${Math.ceil(vectors.length / batchSize)}`\n        );\n      }\n\n      logger.info(\n        `Successfully initialized knowledge base with ${vectors.length} vectors`\n      );\n    } else {\n      logger.warn(\"No vectors to upload - check OpenAI configuration\");\n    }\n\n    return vectors.length;\n  } catch (error) {\n    logger.error(\"Failed to initialize knowledge base\", { error });\n    throw error;\n  }\n}\n\n// Search for relevant context using vector similarity\nexport async function searchContext(\n  query: string,\n  topK: number = 5\n): Promise<string[]> {\n  try {\n    // Create embedding for the query\n    const queryEmbedding = await createEmbedding(query);\n    if (!queryEmbedding) {\n      logger.warn(\n        \"Could not create query embedding, falling back to text search\"\n      );\n      // Fallback to simple text search\n      const results = avenKnowledgeBase\n        .filter(\n          item =>\n            item.content.toLowerCase().includes(query.toLowerCase()) ||\n            item.topic.toLowerCase().includes(query.toLowerCase())\n        )\n        .slice(0, topK)\n        .map(item => item.content);\n      return results;\n    }\n\n    // Query Pinecone for similar vectors\n    const searchResults = await queryVectors(queryEmbedding, topK);\n\n    if (!searchResults.matches || searchResults.matches.length === 0) {\n      logger.warn(\"No matches found in vector search\");\n      return [];\n    }\n\n    // Extract and return the text content\n    const contexts = searchResults.matches\n      .filter(match => match.metadata && match.score && match.score > 0.7)\n      .map(match => (match.metadata as VectorMetadata).text);\n\n    logger.info(`Found ${contexts.length} relevant contexts for query`);\n    return contexts;\n  } catch (error) {\n    logger.error(\"Failed to search context\", { error });\n    // Fallback to local search\n    return avenKnowledgeBase\n      .filter(\n        item =>\n          item.content.toLowerCase().includes(query.toLowerCase()) ||\n          item.topic.toLowerCase().includes(query.toLowerCase())\n      )\n      .slice(0, topK)\n      .map(item => item.content);\n  }\n}\n\n// Generate a response using RAG\nexport async function generateRAGResponse(\n  userQuery: string,\n  conversationHistory?: { role: string; content: string }[]\n): Promise<{ response: string; contexts: string[] }> {\n  try {\n    logger.info(\"Generating RAG response for user query\");\n\n    // Search for relevant context\n    const contexts = await searchContext(userQuery, 5);\n\n    // Combine contexts into a single string\n    const contextString =\n      contexts.length > 0\n        ? contexts.join(\"\\n\\n\")\n        : \"No specific information found in knowledge base.\";\n\n    // Build conversation context\n    let conversationContext = \"\";\n    if (conversationHistory && conversationHistory.length > 0) {\n      conversationContext =\n        \"\\n\\nPrevious conversation:\\n\" +\n        conversationHistory\n          .slice(-4)\n          .map(msg => `${msg.role}: ${msg.content}`)\n          .join(\"\\n\");\n    }\n\n    // Create the full prompt\n    const fullPrompt = `User Question: ${userQuery}${conversationContext}`;\n\n    // Generate response\n    const response =\n      (await generateResponse(fullPrompt, contextString)) ||\n      \"I apologize, but I'm having trouble generating a response right now. Please try again or contact Aven support at 1-800-AVEN-HLP for immediate assistance.\";\n\n    logger.info(\"Successfully generated RAG response\");\n    return {\n      response,\n      contexts,\n    };\n  } catch (error) {\n    logger.error(\"Failed to generate RAG response\", { error });\n    return {\n      response:\n        \"I apologize for the inconvenience. I'm experiencing technical difficulties. Please contact Aven support at 1-800-AVEN-HLP (1-800-283-6457) for assistance, or try again later.\",\n      contexts: [],\n    };\n  }\n}\n\n// Simplified response for quick queries\nexport async function quickResponse(query: string): Promise<string> {\n  try {\n    const { response } = await generateRAGResponse(query);\n    return response;\n  } catch (error) {\n    logger.error(\"Failed to generate quick response\", { error });\n    return \"I'm here to help! However, I'm experiencing some technical issues. Please contact Aven support at 1-800-AVEN-HLP for immediate assistance.\";\n  }\n}\n\n// Get suggested questions based on category\nexport function getSuggestedQuestions(category?: string): string[] {\n  const suggestions = {\n    general: [\n      \"What is Aven and how does it work?\",\n      \"How can I apply for an Aven credit card?\",\n      \"What are the fees associated with Aven?\",\n      \"How does the balance transfer work?\",\n      \"What cashback rewards does Aven offer?\",\n    ],\n    account: [\n      \"How do I check my balance?\",\n      \"How can I make a payment?\",\n      \"Can I increase my credit limit?\",\n      \"How do I update my personal information?\",\n      \"Where can I find my statements?\",\n    ],\n    support: [\n      \"How do I report a lost or stolen card?\",\n      \"How can I dispute a charge?\",\n      \"What should I do if I'm having financial difficulties?\",\n      \"How do I contact customer support?\",\n      \"Is my information secure with Aven?\",\n    ],\n    features: [\n      \"What debt management tools does Aven offer?\",\n      \"How does the mobile app work?\",\n      \"Can I set up automatic payments?\",\n      \"What security features protect my account?\",\n      \"How do I earn and redeem cashback?\",\n    ],\n  };\n\n  return (\n    suggestions[category as keyof typeof suggestions] || suggestions.general\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1745, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1751, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/lib/vapi.ts"],"sourcesContent":["import Vapi from \"@vapi-ai/web\";\nimport { env } from \"@/config/env\";\nimport { Logger } from \"@/utils/logger\";\nimport { generateRAGResponse } from \"@/lib/rag\";\n\nconst logger = new Logger(\"Vapi\");\n\nlet vapiInstance: Vapi | null = null;\n\n// Track call state internally\nlet callActive = false;\nlet muted = false;\n\nexport interface VapiConfig {\n  publicKey?: string;\n  assistantId?: string;\n  onMessage?: (message: Record<string, unknown>) => void;\n  onCall?: () => void;\n  onCallEnd?: () => void;\n  onError?: (error: Error) => void;\n  onSpeechStart?: () => void;\n  onSpeechEnd?: () => void;\n  onVolumeLevel?: (level: number) => void;\n  onTranscript?: (transcript: Record<string, unknown>) => void;\n}\n\nexport function getVapiConfigStatus(): {\n  hasPublicKey: boolean;\n  hasAssistantId: boolean;\n} {\n  return {\n    hasPublicKey: Boolean(env.NEXT_PUBLIC_VAPI_PUBLIC_KEY),\n    hasAssistantId: Boolean(env.NEXT_PUBLIC_VAPI_ASSISTANT_ID),\n  };\n}\n\nexport function getVapiInstance(config?: VapiConfig): Vapi | null {\n  const publicKey = config?.publicKey || env.NEXT_PUBLIC_VAPI_PUBLIC_KEY;\n\n  if (!publicKey) {\n    logger.warn(\"Vapi public key not configured (NEXT_PUBLIC_VAPI_PUBLIC_KEY)\");\n    return null;\n  }\n\n  if (\n    !vapiInstance ||\n    (config?.publicKey && config.publicKey !== env.NEXT_PUBLIC_VAPI_PUBLIC_KEY)\n  ) {\n    try {\n      vapiInstance = new Vapi(publicKey);\n      logger.info(\"Vapi instance initialized\");\n\n      // Set up event handlers\n      if (config?.onMessage) {\n        vapiInstance.on(\"message\", config.onMessage);\n      }\n\n      if (config?.onCall) {\n        vapiInstance.on(\"call-start\", config.onCall);\n      }\n\n      if (config?.onCallEnd) {\n        vapiInstance.on(\"call-end\", config.onCallEnd);\n      }\n\n      if (config?.onError) {\n        vapiInstance.on(\"error\", config.onError);\n      }\n\n      if (config?.onSpeechStart) {\n        vapiInstance.on(\"speech-start\", config.onSpeechStart);\n      }\n\n      if (config?.onSpeechEnd) {\n        vapiInstance.on(\"speech-end\", config.onSpeechEnd);\n      }\n\n      if (config?.onVolumeLevel) {\n        vapiInstance.on(\"volume-level\", config.onVolumeLevel);\n      }\n\n      // Transcript handling is done through message event\n      // if (config?.onTranscript) {\n      //   vapiInstance.on('transcript', config.onTranscript);\n      // }\n\n      // Set up message handler for RAG integration\n      vapiInstance.on(\"message\", async (message: Record<string, unknown>) => {\n        if (config?.onMessage) {\n          config.onMessage(message);\n        }\n\n        // Handle function calls for RAG integration\n        const messageType = message.type as string;\n        const functionCall = message.functionCall as\n          | { name?: string; parameters?: { query?: string } }\n          | undefined;\n\n        if (\n          messageType === \"function-call\" &&\n          functionCall?.name === \"getAvenInfo\"\n        ) {\n          const query = functionCall.parameters?.query || \"\";\n          logger.info(\"Processing Vapi function call for query:\", query);\n\n          try {\n            await generateRAGResponse(query);\n            // Vapi will handle the function result through webhook\n            logger.info(\"Generated response for Vapi function call\");\n          } catch (error) {\n            logger.error(\"Failed to process Vapi query\", { error });\n          }\n        }\n      });\n    } catch (error) {\n      logger.error(\"Failed to initialize Vapi\", { error });\n      return null;\n    }\n  }\n\n  return vapiInstance;\n}\n\nexport async function startVoiceCall(assistantId?: string): Promise<void> {\n  const vapi = getVapiInstance();\n  if (!vapi) {\n    throw new Error(\n      \"Vapi public key missing. Set NEXT_PUBLIC_VAPI_PUBLIC_KEY in your env.\"\n    );\n  }\n\n  const id = assistantId || env.NEXT_PUBLIC_VAPI_ASSISTANT_ID;\n  if (!id) {\n    throw new Error(\n      \"Vapi assistant ID missing. Set NEXT_PUBLIC_VAPI_ASSISTANT_ID in your env.\"\n    );\n  }\n\n  try {\n    logger.info(\"Starting voice call with assistant:\", id);\n    await vapi.start(id);\n    callActive = true;\n    muted = false;\n  } catch (error) {\n    logger.error(\"Failed to start voice call\", { error });\n    callActive = false;\n    throw error;\n  }\n}\n\nexport async function stopVoiceCall(): Promise<void> {\n  const vapi = getVapiInstance();\n  if (!vapi) {\n    throw new Error(\"Vapi not initialized\");\n  }\n\n  try {\n    logger.info(\"Stopping voice call\");\n    vapi.stop();\n    callActive = false;\n    muted = false;\n  } catch (error) {\n    logger.error(\"Failed to stop voice call\", { error });\n    throw error;\n  }\n}\n\nexport function isCallActive(): boolean {\n  return callActive;\n}\n\nexport function isMuted(): boolean {\n  return muted;\n}\n\nexport function toggleMute(): void {\n  const vapi = getVapiInstance();\n  if (!vapi) {\n    logger.warn(\"Cannot toggle mute - Vapi not initialized\");\n    return;\n  }\n\n  if (muted) {\n    vapi.setMuted(false);\n    muted = false;\n    logger.info(\"Unmuted microphone\");\n  } else {\n    vapi.setMuted(true);\n    muted = true;\n    logger.info(\"Muted microphone\");\n  }\n}\n\nexport function sendMessage(message: string): void {\n  const vapi = getVapiInstance();\n  if (!vapi) {\n    logger.warn(\"Cannot send message - Vapi not initialized\");\n    return;\n  }\n\n  // Use 'say' to make the assistant speak the message\n  vapi.send({\n    type: \"say\",\n    message,\n  });\n  logger.debug(\"Sent message to Vapi:\", message);\n}\n\n// Create assistant configuration for Aven support\nexport const avenAssistantConfig = {\n  name: \"Aven Support Assistant\",\n  model: {\n    provider: \"openai\",\n    model: \"gpt-4-turbo-preview\",\n    messages: [\n      {\n        role: \"system\",\n        content: `You are Aven's AI customer support assistant.\n        \n        Grounding policy (must follow):\n        1) For every user question, first retrieve information from Aven's knowledge base by calling the getAvenInfo function with a clear query derived from the user's request.\n        2) Synthesize your answer using ONLY the retrieved context. If the context is insufficient or missing, say so and ask a brief clarifying question, or recommend contacting support.\n        3) Do not invent details. Prefer concise, step-by-step guidance.\n        4) When appropriate, include next actions (e.g., app navigation steps) and mention support contact.\n        \n        Fallback defaults (use only if the knowledge base returns nothing relevant):\n        - Aven helps people save money while paying off credit card debt.\n        - Contact support: 1-800-AVEN-HLP and support@aven.com.\n        \n        Tone: professional, friendly, and efficient. Keep answers brief unless asked for more.`,\n      },\n    ],\n    functions: [\n      {\n        name: \"getAvenInfo\",\n        description:\n          \"Get specific information about Aven products and services\",\n        parameters: {\n          type: \"object\",\n          properties: {\n            query: {\n              type: \"string\",\n              description: \"The user query to search for in the knowledge base\",\n            },\n          },\n          required: [\"query\"],\n        },\n      },\n    ],\n  },\n  voice: {\n    provider: \"elevenlabs\",\n    voiceId: \"rachel\", // Professional female voice\n    stability: 0.8,\n    similarityBoost: 0.9,\n  },\n  firstMessage:\n    \"Hello! I'm your Aven support assistant. How can I help you today?\",\n  transcriber: {\n    provider: \"deepgram\",\n    model: \"nova-2\",\n    language: \"en\",\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1977, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1983, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/chat/ChatInterface.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport {\n  Send,\n  Mic,\n  MicOff,\n  Phone,\n  PhoneOff,\n  Loader2,\n  Volume2,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/useToast\";\nimport useChatStore from \"@/stores/chatStore\";\nimport ChatMessage from \"./ChatMessage\";\nimport SuggestedQuestions from \"./SuggestedQuestions\";\nimport {\n  startVoiceCall,\n  stopVoiceCall,\n  toggleMute,\n  getVapiInstance,\n  getVapiConfigStatus,\n} from \"@/lib/vapi\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nexport default function ChatInterface() {\n  const [input, setInput] = useState(\"\");\n  const [isVoiceCallActive, setIsVoiceCallActive] = useState(false);\n  const [vapiConfigReady, setVapiConfigReady] = useState(false);\n  const [vapiConfigError, setVapiConfigError] = useState<string | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n\n  const {\n    messages,\n    isLoading,\n    isMuted,\n    currentTranscript,\n    addMessage,\n    setLoading,\n    setMuted,\n    setCurrentTranscript,\n    setError,\n  } = useChatStore();\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  // Initialize Vapi listeners\n  useEffect(() => {\n    const { hasPublicKey, hasAssistantId } = getVapiConfigStatus();\n    const ready = hasPublicKey && hasAssistantId;\n    setVapiConfigReady(ready);\n    if (!ready) {\n      const missing = [\n        !hasPublicKey ? \"NEXT_PUBLIC_VAPI_PUBLIC_KEY\" : null,\n        !hasAssistantId ? \"NEXT_PUBLIC_VAPI_ASSISTANT_ID\" : null,\n      ]\n        .filter(Boolean)\n        .join(\", \");\n      const message = `Voice not configured. Missing env: ${missing}`;\n      setVapiConfigError(message);\n    } else {\n      setVapiConfigError(null);\n    }\n\n    getVapiInstance({\n      onMessage: (message: Record<string, unknown>) => {\n        const messageType = message.type as string;\n        const transcript = message.transcript as\n          | { isFinal?: boolean; role?: string; text?: string }\n          | undefined;\n\n        if (messageType === \"transcript\") {\n          // Handle interim transcripts for live feedback\n          if (\n            !transcript?.isFinal &&\n            transcript?.role === \"user\" &&\n            transcript?.text\n          ) {\n            setCurrentTranscript(transcript.text);\n          }\n\n          // Handle final transcripts\n          if (transcript?.isFinal) {\n            if (transcript.role === \"user\" && transcript.text) {\n              addMessage({\n                role: \"user\",\n                content: transcript.text,\n                isVoice: true,\n              });\n              setCurrentTranscript(\"\");\n            } else if (transcript.role === \"assistant\" && transcript.text) {\n              addMessage({\n                role: \"assistant\",\n                content: transcript.text,\n                isVoice: true,\n              });\n            }\n          }\n        }\n      },\n      onCallEnd: () => {\n        setIsVoiceCallActive(false);\n        toast({\n          title: \"Voice call ended\",\n          description:\n            \"You can continue chatting via text or start a new voice call.\",\n        });\n      },\n      onError: (error: Error) => {\n        console.error(\"Vapi error:\", error);\n        setError(\"Voice connection error. Please try again.\");\n        setIsVoiceCallActive(false);\n      },\n    });\n  }, [addMessage, setCurrentTranscript, setError, toast]);\n\n  const handleSendMessage = async () => {\n    if (!input.trim() || isLoading) return;\n\n    const userMessage = input.trim();\n    setInput(\"\");\n\n    // Add user message\n    addMessage({\n      role: \"user\",\n      content: userMessage,\n      isVoice: false,\n    });\n\n    setLoading(true);\n\n    try {\n      const response = await fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          message: userMessage,\n          history: messages.slice(-6).map((m) => ({\n            role: m.role,\n            content: m.content,\n          })),\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.error) {\n        throw new Error(data.error);\n      }\n\n      // Add assistant response\n      addMessage({\n        role: \"assistant\",\n        content: data.response,\n        isVoice: false,\n        contexts: data.contexts,\n      });\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      setError(\"Failed to send message. Please try again.\");\n      toast({\n        title: \"Error\",\n        description: \"Failed to get response. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleVoiceToggle = async () => {\n    try {\n      if (!vapiConfigReady) {\n        const description =\n          vapiConfigError ||\n          \"Voice assistant is not configured. Set Vapi env variables and reload.\";\n        toast({\n          title: \"Voice unavailable\",\n          description,\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      if (isVoiceCallActive) {\n        await stopVoiceCall();\n        setIsVoiceCallActive(false);\n        toast({\n          title: \"Voice call ended\",\n          description: \"Voice assistant has been disconnected.\",\n        });\n      } else {\n        await startVoiceCall();\n        setIsVoiceCallActive(true);\n        toast({\n          title: \"Voice call started\",\n          description: \"You can now speak with the assistant.\",\n        });\n      }\n    } catch (error) {\n      console.error(\"Voice toggle error:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to toggle voice call. Please check your settings.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleMuteToggle = () => {\n    if (isVoiceCallActive) {\n      toggleMute();\n      setMuted(!isMuted);\n    }\n  };\n\n  const handleSuggestedQuestion = (question: string) => {\n    setInput(question);\n  };\n\n  return (\n    <Card className=\"w-full h-full flex flex-col bg-white shadow-xl\">\n      {/* Header */}\n      <div className=\"p-4 border-b bg-gradient-to-r from-blue-600 to-indigo-600 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-xl font-semibold\">Aven Support Assistant</h2>\n            <p className=\"text-sm opacity-90\">Available 24/7 to help you</p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {isVoiceCallActive && (\n              <Button\n                onClick={handleMuteToggle}\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"bg-white/20 hover:bg-white/30 text-white\"\n              >\n                {isMuted ? (\n                  <MicOff className=\"h-4 w-4\" />\n                ) : (\n                  <Mic className=\"h-4 w-4\" />\n                )}\n              </Button>\n            )}\n            <Button\n              onClick={handleVoiceToggle}\n              variant=\"secondary\"\n              size=\"sm\"\n              className={`${\n                isVoiceCallActive\n                  ? \"bg-red-500 hover:bg-red-600\"\n                  : \"bg-white/20 hover:bg-white/30\"\n              } text-white`}\n              disabled={!vapiConfigReady}\n            >\n              {isVoiceCallActive ? (\n                <>\n                  <PhoneOff className=\"h-4 w-4 mr-2\" />\n                  End Call\n                </>\n              ) : (\n                <>\n                  <Phone className=\"h-4 w-4 mr-2\" />\n                  Start Voice\n                </>\n              )}\n            </Button>\n          </div>\n        </div>\n\n        {/* Voice Status Indicator */}\n        <AnimatePresence>\n          {isVoiceCallActive && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mt-3 flex items-center gap-2\"\n            >\n              <div className=\"flex items-center gap-1\">\n                <Volume2 className=\"h-3 w-3 animate-pulse\" />\n                <span className=\"text-xs\">Voice Active</span>\n              </div>\n              {currentTranscript && (\n                <span className=\"text-xs italic opacity-75\">\n                  &ldquo;{currentTranscript}&rdquo;\n                </span>\n              )}\n            </motion.div>\n          )}\n          {!isVoiceCallActive && vapiConfigError && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mt-3 text-xs text-red-100\"\n            >\n              {vapiConfigError}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {/* Messages Area */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((message) => (\n          <ChatMessage key={message.id} message={message} />\n        ))}\n\n        {isLoading && (\n          <div className=\"flex items-center gap-2 text-gray-500\">\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\n            <span className=\"text-sm\">Assistant is typing...</span>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Suggested Questions */}\n      {messages.length <= 2 && (\n        <div className=\"px-4 pb-2\">\n          <SuggestedQuestions onSelectQuestion={handleSuggestedQuestion} />\n        </div>\n      )}\n\n      {/* Input Area */}\n      <div className=\"p-4 border-t bg-gray-50\">\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            handleSendMessage();\n          }}\n          className=\"flex gap-2\"\n        >\n          <Input\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Type your message or click the phone to speak...\"\n            disabled={isLoading || isVoiceCallActive}\n            className=\"flex-1\"\n          />\n          <Button\n            type=\"submit\"\n            disabled={!input.trim() || isLoading || isVoiceCallActive}\n          >\n            {isLoading ? (\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n            ) : (\n              <Send className=\"h-4 w-4\" />\n            )}\n          </Button>\n        </form>\n\n        <p className=\"text-xs text-gray-500 mt-2 text-center\">\n          By using this service, you agree to Aven&apos;s terms and privacy\n          policy.\n        </p>\n      </div>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2514, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2520, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/ui/label.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n);\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAEA;AAHA;AAHA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,sMAAM,UAAU,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAe,IAAI;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,kKAAe,IAAI,CAAC,WAAW"}},
    {"offset": {"line": 2546, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2552, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/admin/KnowledgeBaseManager.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/useToast\";\nimport {\n  Database,\n  Loader2,\n  CheckCircle,\n  AlertCircle,\n  RefreshCw,\n} from \"lucide-react\";\n\nexport default function KnowledgeBaseManager() {\n  const [isInitializing, setIsInitializing] = useState(false);\n  const [initStatus, setInitStatus] = useState<\"idle\" | \"success\" | \"error\">(\n    \"idle\"\n  );\n  const [vectorCount, setVectorCount] = useState<number | null>(null);\n  const [isScraping, setIsScraping] = useState(false);\n  const [scrapeStatus, setScrapeStatus] = useState<\n    \"idle\" | \"success\" | \"error\"\n  >(\"idle\");\n  const [ingestStats, setIngestStats] = useState<{\n    docs: number;\n    chunks: number;\n    upserted: number;\n  } | null>(null);\n\n  // Options\n  const [limit, setLimit] = useState<number>(15);\n  const [chunkMaxLength, setChunkMaxLength] = useState<number>(900);\n  const [batchSize, setBatchSize] = useState<number>(100);\n  const [clearOld, setClearOld] = useState<boolean>(false);\n  const { toast } = useToast();\n\n  const handleInitializeKnowledgeBase = async () => {\n    setIsInitializing(true);\n    setInitStatus(\"idle\");\n\n    try {\n      const response = await fetch(\"/api/knowledge/init\", {\n        method: \"POST\",\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        setInitStatus(\"success\");\n        setVectorCount(data.count);\n        toast({\n          title: \"Success\",\n          description: `Knowledge base initialized with ${data.count} vectors.`,\n        });\n      } else {\n        throw new Error(data.error || \"Failed to initialize\");\n      }\n    } catch (error) {\n      console.error(\"Initialization error:\", error);\n      setInitStatus(\"error\");\n      toast({\n        title: \"Error\",\n        description:\n          \"Failed to initialize knowledge base. Check your API keys.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsInitializing(false);\n    }\n  };\n\n  const handleScrapeAndIngest = async () => {\n    setIsScraping(true);\n    setScrapeStatus(\"idle\");\n    setIngestStats(null);\n\n    try {\n      const response = await fetch(\"/api/knowledge/scrape\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          limit,\n          clearOld,\n          chunkMaxLength,\n          batchSize,\n        }),\n      });\n\n      const data = await response.json();\n      if (!response.ok || !data.success) {\n        throw new Error(data.error || \"Failed to scrape & ingest\");\n      }\n\n      setScrapeStatus(\"success\");\n      setIngestStats(data.stats);\n      setVectorCount((prev) =>\n        typeof prev === \"number\"\n          ? prev + (data.stats?.upserted || 0)\n          : data.stats?.upserted || null\n      );\n      toast({\n        title: \"Scrape & Ingest complete\",\n        description: `Docs: ${data.stats.docs}, Chunks: ${data.stats.chunks}, Upserted: ${data.stats.upserted}`,\n      });\n    } catch (error) {\n      console.error(\"Scrape & Ingest error:\", error);\n      setScrapeStatus(\"error\");\n      toast({\n        title: \"Error\",\n        description:\n          \"Failed to scrape & ingest. Ensure EXA, OpenAI, and Pinecone keys are set.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsScraping(false);\n    }\n  };\n\n  return (\n    <Card className=\"p-6\">\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n              <Database className=\"h-5 w-5\" />\n              Knowledge Base Manager\n            </h3>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Initialize or update the Aven knowledge base in Pinecone\n            </p>\n          </div>\n          {initStatus === \"success\" && (\n            <CheckCircle className=\"h-6 w-6 text-green-600\" />\n          )}\n          {initStatus === \"error\" && (\n            <AlertCircle className=\"h-6 w-6 text-red-600\" />\n          )}\n        </div>\n\n        <div className=\"space-y-3\">\n          {vectorCount !== null && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n              <p className=\"text-sm text-blue-800\">\n                <strong>{vectorCount}</strong> knowledge vectors loaded in\n                Pinecone\n              </p>\n            </div>\n          )}\n\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={handleInitializeKnowledgeBase}\n              disabled={isInitializing}\n              className=\"flex-1\"\n            >\n              {isInitializing ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Initializing...\n                </>\n              ) : (\n                <>\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  Initialize Knowledge Base\n                </>\n              )}\n            </Button>\n          </div>\n\n          {/* Scrape & Ingest Controls */}\n          <div className=\"mt-6 border-t pt-4 space-y-3\">\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div>\n                <Label htmlFor=\"limit\">Max pages</Label>\n                <Input\n                  id=\"limit\"\n                  type=\"number\"\n                  min={1}\n                  max={50}\n                  value={limit}\n                  onChange={(e) =>\n                    setLimit(parseInt(e.target.value || \"0\", 10) || 0)\n                  }\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"chunk\">Chunk length</Label>\n                <Input\n                  id=\"chunk\"\n                  type=\"number\"\n                  min={300}\n                  max={2000}\n                  value={chunkMaxLength}\n                  onChange={(e) =>\n                    setChunkMaxLength(parseInt(e.target.value || \"0\", 10) || 0)\n                  }\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"batch\">Batch size</Label>\n                <Input\n                  id=\"batch\"\n                  type=\"number\"\n                  min={10}\n                  max={500}\n                  value={batchSize}\n                  onChange={(e) =>\n                    setBatchSize(parseInt(e.target.value || \"0\", 10) || 0)\n                  }\n                />\n              </div>\n              <div className=\"flex items-end gap-2\">\n                <input\n                  id=\"clearOld\"\n                  type=\"checkbox\"\n                  className=\"h-4 w-4\"\n                  checked={clearOld}\n                  onChange={(e) => setClearOld(e.target.checked)}\n                />\n                <Label htmlFor=\"clearOld\">Clear existing vectors</Label>\n              </div>\n            </div>\n\n            <Button\n              onClick={handleScrapeAndIngest}\n              disabled={isScraping}\n              className=\"w-full\"\n            >\n              {isScraping ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Scraping & Ingesting...\n                </>\n              ) : (\n                <>\n                  <Database className=\"h-4 w-4 mr-2\" />\n                  Scrape & Ingest Latest Aven Info\n                </>\n              )}\n            </Button>\n\n            {scrapeStatus === \"success\" && ingestStats && (\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 text-sm text-green-900\">\n                Ingest complete — Docs: <strong>{ingestStats.docs}</strong>,\n                Chunks: <strong>{ingestStats.chunks}</strong>, Upserted:{\" \"}\n                <strong>{ingestStats.upserted}</strong>\n              </div>\n            )}\n            {scrapeStatus === \"error\" && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-900\">\n                Scrape & ingest failed. Check API keys and try again.\n              </div>\n            )}\n          </div>\n\n          <div className=\"text-xs text-gray-500 space-y-1\">\n            <p>• Ensure OpenAI, Pinecone, and EXA API keys are configured</p>\n            <p>\n              • Initialize loads local seed data; Scrape & Ingest pulls live\n              pages\n            </p>\n            <p>• The process may take several minutes depending on limits</p>\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3038, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3044, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Tabs = TabsPrimitive.Root;\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n));\nTabsList.displayName = TabsPrimitive.List.displayName;\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n"],"names":[],"mappings":";;;;;;;AAEA;AAGA;AAFA;AAHA;;;;;AAOA,MAAM,OAAO,iKAAc,IAAI;AAE/B,MAAM,yBAAW,sMAAM,UAAU,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAc,IAAI;QACjB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,iKAAc,IAAI,CAAC,WAAW;AAErD,MAAM,4BAAc,sMAAM,UAAU,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAc,OAAO;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,iKAAc,OAAO,CAAC,WAAW;AAE3D,MAAM,4BAAc,sMAAM,UAAU,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAc,OAAO;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,iKAAc,OAAO,CAAC,WAAW"}},
    {"offset": {"line": 3091, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3097, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamding/Documents/GitHub/AI-Customer-Support-Agent/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport ChatInterface from \"@/components/chat/ChatInterface\";\nimport KnowledgeBaseManager from \"@/components/admin/KnowledgeBaseManager\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  CreditCard,\n  MessageSquare,\n  Settings,\n  Shield,\n  TrendingUp,\n  Users,\n} from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\nexport default function Home() {\n  const [showAdmin, setShowAdmin] = useState(false);\n\n  useEffect(() => {\n    // Check for admin mode from URL params or localStorage\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get(\"admin\") === \"true\") {\n      setShowAdmin(true);\n    }\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\">\n      {/* Hero Section */}\n      <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white\">\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <CreditCard className=\"h-10 w-10\" />\n              <div>\n                <h1 className=\"text-3xl font-bold\">Aven</h1>\n                <p className=\"text-sm opacity-90\">Smart Credit Solutions</p>\n              </div>\n            </div>\n            <div className=\"hidden md:flex items-center space-x-6\">\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"bg-white/20 hover:bg-white/30 text-white\"\n              >\n                Sign In\n              </Button>\n              <Button\n                size=\"sm\"\n                className=\"bg-white text-blue-600 hover:bg-gray-100\"\n              >\n                Apply Now\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          {/* Left Column - Info Cards */}\n          <div className=\"lg:col-span-1 space-y-4\">\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.1 }}\n            >\n              <Card className=\"p-6 border-blue-100 bg-white/80 backdrop-blur\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <div className=\"p-2 bg-blue-100 rounded-lg\">\n                    <Shield className=\"h-6 w-6 text-blue-600\" />\n                  </div>\n                  <h3 className=\"font-semibold text-lg\">\n                    0% APR for 21 Months\n                  </h3>\n                </div>\n                <p className=\"text-gray-600 text-sm\">\n                  Transfer your balances and save on interest with our\n                  industry-leading intro rate.\n                </p>\n              </Card>\n            </motion.div>\n\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.2 }}\n            >\n              <Card className=\"p-6 border-green-100 bg-white/80 backdrop-blur\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <div className=\"p-2 bg-green-100 rounded-lg\">\n                    <TrendingUp className=\"h-6 w-6 text-green-600\" />\n                  </div>\n                  <h3 className=\"font-semibold text-lg\">Cashback Rewards</h3>\n                </div>\n                <p className=\"text-gray-600 text-sm\">\n                  Earn 3% on groceries, 2% on gas, and 1% on all other purchases\n                  with no limits.\n                </p>\n              </Card>\n            </motion.div>\n\n            <motion.div\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: 0.3 }}\n            >\n              <Card className=\"p-6 border-purple-100 bg-white/80 backdrop-blur\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <div className=\"p-2 bg-purple-100 rounded-lg\">\n                    <Users className=\"h-6 w-6 text-purple-600\" />\n                  </div>\n                  <h3 className=\"font-semibold text-lg\">24/7 Support</h3>\n                </div>\n                <p className=\"text-gray-600 text-sm\">\n                  Get help anytime with our AI assistant or call 1-800-AVEN-HLP\n                  for human support.\n                </p>\n              </Card>\n            </motion.div>\n\n            {/* Quick Links */}\n            <Card className=\"p-4 bg-gray-50\">\n              <h4 className=\"font-semibold mb-3 text-gray-700\">Quick Links</h4>\n              <div className=\"space-y-2\">\n                <a\n                  href=\"#\"\n                  className=\"block text-sm text-blue-600 hover:underline\"\n                >\n                  Apply for Aven Card\n                </a>\n                <a\n                  href=\"#\"\n                  className=\"block text-sm text-blue-600 hover:underline\"\n                >\n                  Check Application Status\n                </a>\n                <a\n                  href=\"#\"\n                  className=\"block text-sm text-blue-600 hover:underline\"\n                >\n                  Balance Transfer Calculator\n                </a>\n                <a\n                  href=\"#\"\n                  className=\"block text-sm text-blue-600 hover:underline\"\n                >\n                  Learn About Rewards\n                </a>\n              </div>\n            </Card>\n          </div>\n\n          {/* Right Column - Chat Interface */}\n          <div className=\"lg:col-span-2\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n              className=\"h-[700px]\"\n            >\n              <Tabs defaultValue=\"chat\" className=\"h-full\">\n                <TabsList className=\"grid w-full grid-cols-2\">\n                  <TabsTrigger value=\"chat\">\n                    <MessageSquare className=\"h-4 w-4 mr-2\" />\n                    Customer Support\n                  </TabsTrigger>\n                  {showAdmin && (\n                    <TabsTrigger value=\"admin\">\n                      <Settings className=\"h-4 w-4 mr-2\" />\n                      Admin\n                    </TabsTrigger>\n                  )}\n                </TabsList>\n\n                <TabsContent value=\"chat\" className=\"h-[calc(100%-48px)]\">\n                  <ChatInterface />\n                </TabsContent>\n\n                {showAdmin && (\n                  <TabsContent value=\"admin\" className=\"h-[calc(100%-48px)]\">\n                    <KnowledgeBaseManager />\n                  </TabsContent>\n                )}\n              </Tabs>\n            </motion.div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"mt-12 pt-8 border-t border-gray-200\">\n          <div className=\"grid md:grid-cols-4 gap-8\">\n            <div>\n              <h4 className=\"font-semibold mb-3\">Products</h4>\n              <ul className=\"space-y-2 text-sm text-gray-600\">\n                <li>Credit Cards</li>\n                <li>Balance Transfers</li>\n                <li>Debt Management</li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"font-semibold mb-3\">Resources</h4>\n              <ul className=\"space-y-2 text-sm text-gray-600\">\n                <li>Credit Education</li>\n                <li>Calculators</li>\n                <li>Blog</li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"font-semibold mb-3\">Support</h4>\n              <ul className=\"space-y-2 text-sm text-gray-600\">\n                <li>Help Center</li>\n                <li>Contact Us</li>\n                <li>1-800-AVEN-HLP</li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"font-semibold mb-3\">Legal</h4>\n              <ul className=\"space-y-2 text-sm text-gray-600\">\n                <li>Privacy Policy</li>\n                <li>Terms of Service</li>\n                <li>Security</li>\n              </ul>\n            </div>\n          </div>\n\n          <div className=\"mt-8 pt-8 border-t border-gray-200 text-center text-sm text-gray-500\">\n            © 2024 Aven. All rights reserved. | Equal Housing Lender | Member\n            FDIC\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3832, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}