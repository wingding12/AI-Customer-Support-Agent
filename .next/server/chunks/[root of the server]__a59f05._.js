module.exports = {

"[externals]/next/dist/compiled/next-server/app-route.runtime.dev.js [external] (next/dist/compiled/next-server/app-route.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-route.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/@opentelemetry/api [external] (@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("@opentelemetry/api", () => require("@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page.runtime.dev.js [external] (next/dist/compiled/next-server/app-page.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-page.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[project]/src/data/aven-knowledge.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "avenKnowledgeBase": (()=>avenKnowledgeBase),
    "getCategories": (()=>getCategories),
    "getKnowledgeByCategory": (()=>getKnowledgeByCategory),
    "searchKnowledge": (()=>searchKnowledge)
});
const avenKnowledgeBase = [
    // Company Overview
    {
        id: "aven-001",
        category: "company",
        topic: "About Aven",
        content: "Aven is a revolutionary fintech company that helps people save money while paying off credit card debt. We provide intelligent credit solutions that empower individuals to take control of their financial future. Founded in 2023, Aven has quickly become a trusted partner for thousands of users looking to reduce their debt burden and improve their financial health."
    },
    {
        id: "aven-002",
        category: "company",
        topic: "Mission",
        content: "Aven's mission is to democratize access to smart financial tools and help millions of Americans escape the cycle of credit card debt. We believe everyone deserves fair and transparent financial services that actually work in their favor, not against them."
    },
    {
        id: "aven-003",
        category: "company",
        topic: "Values",
        content: "Our core values include transparency, customer empowerment, financial inclusion, and innovation. We're committed to providing clear, honest information about all our products and services, with no hidden fees or surprise charges."
    },
    // Products and Services
    {
        id: "aven-004",
        category: "products",
        topic: "Aven Credit Card",
        content: "The Aven Credit Card is designed specifically for people paying off debt. It offers 0% APR on balance transfers for 21 months, no annual fee, and smart spending controls to help you avoid adding new debt while paying off existing balances. The card also provides cashback rewards on essential purchases like groceries and gas."
    },
    {
        id: "aven-005",
        category: "products",
        topic: "Balance Transfer",
        content: "Aven offers one of the longest 0% APR balance transfer periods in the industry - 21 months. There's a one-time balance transfer fee of 3% or $5, whichever is greater. You can transfer balances from multiple cards, up to your approved credit limit. The balance transfer must be completed within 60 days of account opening."
    },
    {
        id: "aven-006",
        category: "products",
        topic: "Cashback Rewards",
        content: "Earn 3% cashback on groceries, 2% on gas and transportation, and 1% on all other purchases. There's no limit to the cashback you can earn, and rewards never expire. Cashback can be redeemed as a statement credit, direct deposit to your bank account, or applied directly to your balance."
    },
    {
        id: "aven-007",
        category: "products",
        topic: "Debt Management Tools",
        content: "Aven provides free debt management tools including a debt payoff calculator, personalized payoff plans, spending insights, and budget tracking. Our AI-powered recommendations help you optimize your payment strategy to save the most on interest and pay off debt faster."
    },
    // Features and Benefits
    {
        id: "aven-008",
        category: "features",
        topic: "Smart Notifications",
        content: "Get intelligent alerts about your spending, payment due dates, and opportunities to save money. Our system learns your patterns and provides personalized insights to help you stay on track with your financial goals."
    },
    {
        id: "aven-009",
        category: "features",
        topic: "Financial Education",
        content: "Access our comprehensive library of financial education resources, including articles, videos, and interactive tools. Topics cover credit score improvement, budgeting basics, debt reduction strategies, and long-term financial planning."
    },
    {
        id: "aven-010",
        category: "features",
        topic: "Mobile App",
        content: "The Aven mobile app is available for iOS and Android. Features include instant balance checks, payment scheduling, spending categorization, virtual card numbers for online shopping, and biometric security. The app has a 4.8-star rating with over 10,000 reviews."
    },
    // Account Management
    {
        id: "aven-011",
        category: "account",
        topic: "Eligibility Requirements",
        content: "To apply for an Aven Credit Card, you must be 18 years or older, have a valid Social Security number, have a US mailing address, and have a credit score of at least 670. We perform a hard credit inquiry during the application process."
    },
    {
        id: "aven-012",
        category: "account",
        topic: "Application Process",
        content: "The application process takes about 5 minutes online. You'll need to provide personal information, employment details, and income verification. Most decisions are instant, though some applications may require additional review within 7-10 business days. Once approved, your card arrives within 7-10 business days."
    },
    {
        id: "aven-013",
        category: "account",
        topic: "Credit Limits",
        content: "Credit limits range from $1,000 to $25,000 based on your creditworthiness and income. You can request a credit limit increase after 6 months of on-time payments. Automatic reviews for credit limit increases occur every 6 months."
    },
    {
        id: "aven-014",
        category: "account",
        topic: "Payment Options",
        content: "Make payments through the mobile app, online portal, automatic payments, phone payments, or mail. We accept payments from checking accounts, savings accounts, and debit cards. Credit card payments from other cards are not accepted. Payments made before 5 PM ET on business days are credited the same day."
    },
    // Fees and Rates
    {
        id: "aven-015",
        category: "fees",
        topic: "Fee Structure",
        content: "No annual fee, no over-limit fees, no foreign transaction fees. Balance transfer fee: 3% or $5 minimum. Cash advance fee: 5% or $10 minimum. Late payment fee: up to $40. Returned payment fee: up to $40."
    },
    {
        id: "aven-016",
        category: "fees",
        topic: "Interest Rates",
        content: "0% intro APR on balance transfers for 21 months, then 14.99% - 24.99% variable APR based on creditworthiness. 0% intro APR on purchases for 12 months, then the same variable APR applies. Cash advance APR: 26.99% variable, applied immediately with no grace period."
    },
    // Customer Support
    {
        id: "aven-017",
        category: "support",
        topic: "Contact Options",
        content: "24/7 phone support at 1-800-AVEN-HLP (1-800-283-6457). Live chat available on website and mobile app from 8 AM to 11 PM ET. Email support at support@aven.com with response within 24 hours. In-app messaging for account-specific questions."
    },
    {
        id: "aven-018",
        category: "support",
        topic: "Lost or Stolen Card",
        content: "Report lost or stolen cards immediately through the app or by calling 1-800-AVEN-HLP. We'll freeze your card instantly and send a replacement via expedited shipping at no charge. You won't be liable for unauthorized charges made after you report the card missing."
    },
    {
        id: "aven-019",
        category: "support",
        topic: "Dispute Process",
        content: "File disputes for unauthorized or incorrect charges through the app or online portal. We'll issue a provisional credit within 2 business days while investigating. Most disputes are resolved within 30 days. You'll receive written confirmation of the resolution."
    },
    // Security and Privacy
    {
        id: "aven-020",
        category: "security",
        topic: "Security Features",
        content: "Bank-level 256-bit encryption, two-factor authentication, biometric login options, real-time fraud monitoring, instant card freeze/unfreeze, virtual card numbers for online shopping, and zero liability protection for unauthorized charges."
    },
    {
        id: "aven-021",
        category: "security",
        topic: "Privacy Policy",
        content: "We never sell your personal information to third parties. Data is used only to provide services, improve products, and comply with legal requirements. You can request your data or deletion at any time. We're compliant with CCPA, GDPR, and all federal privacy regulations."
    },
    // FAQs
    {
        id: "aven-022",
        category: "faq",
        topic: "How long does balance transfer take?",
        content: "Balance transfers typically complete within 5-7 business days, though some may take up to 14 days depending on the issuing bank. Continue making minimum payments on your old card until the transfer is confirmed complete."
    },
    {
        id: "aven-023",
        category: "faq",
        topic: "Can I transfer multiple balances?",
        content: "Yes, you can transfer balances from multiple cards as long as the total doesn't exceed your credit limit. Each transfer is processed separately and may complete at different times."
    },
    {
        id: "aven-024",
        category: "faq",
        topic: "Does applying hurt my credit score?",
        content: "We perform a hard credit inquiry during the application process, which may temporarily lower your credit score by a few points. However, consolidating debt with our card can improve your credit utilization ratio and potentially increase your score over time."
    },
    {
        id: "aven-025",
        category: "faq",
        topic: "What happens after the intro APR period?",
        content: "After the 21-month intro period for balance transfers (or 12 months for purchases), the variable APR of 14.99% - 24.99% applies to any remaining balance. We'll notify you 45 days before the intro period ends."
    },
    {
        id: "aven-026",
        category: "faq",
        topic: "Can I increase my credit limit?",
        content: "You can request a credit limit increase after 6 months of on-time payments through the app or online portal. We also automatically review accounts every 6 months for potential increases. Requests may result in a soft or hard credit inquiry."
    },
    {
        id: "aven-027",
        category: "faq",
        topic: "Is there a penalty APR?",
        content: "No, Aven does not charge penalty APRs. Your rate remains the same even if you miss a payment, though late fees may apply. We believe in helping you succeed, not penalizing you when you're struggling."
    },
    // Special Programs
    {
        id: "aven-028",
        category: "programs",
        topic: "Financial Hardship Program",
        content: "If you're experiencing financial hardship, we offer payment deferrals, reduced interest rates, and modified payment plans. Contact our hardship team at 1-800-AVEN-HLP to discuss options. We're here to help you through difficult times."
    },
    {
        id: "aven-029",
        category: "programs",
        topic: "Refer a Friend",
        content: "Earn $50 for each friend who's approved for an Aven card through your referral link. Your friend also gets a $50 bonus after their first purchase. There's no limit to how many friends you can refer."
    },
    {
        id: "aven-030",
        category: "programs",
        topic: "Credit Score Monitoring",
        content: "Free FICO score updates monthly, credit report monitoring with alerts for changes, personalized tips to improve your score, and credit score simulator to see impact of financial decisions. All included at no extra charge with your Aven card."
    }
];
function searchKnowledge(query) {
    const lowercaseQuery = query.toLowerCase();
    return avenKnowledgeBase.filter((item)=>item.content.toLowerCase().includes(lowercaseQuery) || item.topic.toLowerCase().includes(lowercaseQuery) || item.category.toLowerCase().includes(lowercaseQuery));
}
function getKnowledgeByCategory(category) {
    return avenKnowledgeBase.filter((item)=>item.category === category);
}
function getCategories() {
    return [
        ...new Set(avenKnowledgeBase.map((item)=>item.category))
    ];
}
}}),
"[project]/src/utils/logger.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
/* eslint-disable */ __turbopack_esm__({
    "Logger": (()=>Logger)
});
const isServer = "undefined" === "undefined";
class Logger {
    context;
    isServerContext;
    colors = {
        reset: "\x1b[0m",
        red: "\x1b[31m",
        yellow: "\x1b[33m",
        blue: "\x1b[34m",
        gray: "\x1b[90m",
        bold: "\x1b[1m",
        magenta: "\x1b[35m"
    };
    constructor(context){
        this.context = context;
        this.isServerContext = isServer;
    }
    shouldLog() {
        // Always log server-side actions
        if (this.isServerContext) return true;
        // Only log client-side in development
        return ("TURBOPACK compile-time value", "development") === "development";
    }
    formatMessage(level, message, data) {
        const timestamp = new Date().toISOString();
        const environment = this.isServerContext ? "[SERVER]" : "[CLIENT]";
        const prefix = `${timestamp} ${environment} ${this.context}:`;
        return {
            prefix,
            message,
            ...data && {
                data
            }
        };
    }
    colorize(color, text) {
        // Only apply colors on the server side where they work
        if (!this.isServerContext) return text;
        return `${this.colors[color]}${text}${this.colors.reset}`;
    }
    formatLogLevel(level) {
        return `[${level.toUpperCase()}]`;
    }
    formatOutput({ prefix, message, data }) {
        const logParts = [
            prefix,
            message
        ];
        if (data) {
            logParts.push("\n" + JSON.stringify(data, null, 2));
        }
        return logParts.join(" ");
    }
    info(message, data) {
        if (!this.shouldLog()) return;
        const formattedData = this.formatMessage("info", message, data);
        console.log(this.colorize("blue", this.formatLogLevel("info")) + " " + this.formatOutput(formattedData));
    }
    error(message, error, data) {
        if (!this.shouldLog()) return;
        const errorData = error instanceof Error ? {
            name: error.name,
            message: error.message,
            stack: error.stack
        } : error;
        const formattedData = this.formatMessage("error", message, {
            ...data,
            error: errorData
        });
        console.error(this.colorize("red", this.colors.bold + this.formatLogLevel("error")) + " " + this.formatOutput(formattedData));
    }
    warn(message, data) {
        if (!this.shouldLog()) return;
        const formattedData = this.formatMessage("warn", message, data);
        console.warn(this.colorize("yellow", this.formatLogLevel("warn")) + " " + this.formatOutput(formattedData));
    }
    debug(message, data) {
        if (!this.shouldLog()) return;
        const formattedData = this.formatMessage("debug", message, data);
        console.debug(this.colorize("gray", this.formatLogLevel("debug")) + " " + this.formatOutput(formattedData));
    }
    // New method specifically for server actions
    action(message, data) {
        if (!this.shouldLog()) return;
        const formattedData = this.formatMessage("action", message, data);
        console.log(this.colorize("magenta", this.formatLogLevel("action")) + " " + this.formatOutput(formattedData));
    }
}
}}),
"[project]/src/config/env.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "env": (()=>env)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/utils/logger.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/zod/lib/index.mjs [app-route] (ecmascript)");
;
;
const logger = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Logger"]("Config:Env");
// Schema for environment variables
const envSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
    NODE_ENV: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().default("development"),
    NEXT_PUBLIC_APP_URL: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().default("http://localhost:3000"),
    // OpenAI Configuration
    OPENAI_API_KEY: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().optional(),
    // Pinecone Configuration
    PINECONE_API_KEY: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().optional(),
    PINECONE_ENVIRONMENT: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().optional(),
    PINECONE_INDEX_NAME: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().default("aven-knowledge-base"),
    // Vapi Configuration
    VAPI_API_KEY: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().optional(),
    NEXT_PUBLIC_VAPI_PUBLIC_KEY: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().optional(),
    NEXT_PUBLIC_VAPI_ASSISTANT_ID: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().optional()
});
// Function to validate environment variables
const validateEnv = ()=>{
    try {
        logger.info("Validating environment variables");
        const env = {
            NODE_ENV: ("TURBOPACK compile-time value", "development"),
            NEXT_PUBLIC_APP_URL: process.env.NEXT_PUBLIC_APP_URL,
            OPENAI_API_KEY: process.env.OPENAI_API_KEY,
            PINECONE_API_KEY: process.env.PINECONE_API_KEY,
            PINECONE_ENVIRONMENT: process.env.PINECONE_ENVIRONMENT,
            PINECONE_INDEX_NAME: process.env.PINECONE_INDEX_NAME,
            VAPI_API_KEY: process.env.VAPI_API_KEY,
            NEXT_PUBLIC_VAPI_PUBLIC_KEY: process.env.NEXT_PUBLIC_VAPI_PUBLIC_KEY,
            NEXT_PUBLIC_VAPI_ASSISTANT_ID: process.env.NEXT_PUBLIC_VAPI_ASSISTANT_ID
        };
        const parsed = envSchema.parse(env);
        logger.info("Environment variables validated successfully");
        return parsed;
    } catch (error) {
        if (error instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].ZodError) {
            const missingVars = error.errors.map((err)=>err.path.join("."));
            logger.error("Invalid environment variables", {
                error: {
                    missingVars
                }
            });
            console.warn(`⚠️ Missing optional environment variables: ${missingVars.join(", ")}. Some features may not work properly.`);
            // Return partial env with defaults
            return envSchema.parse({
                NODE_ENV: ("TURBOPACK compile-time value", "development") || "development",
                NEXT_PUBLIC_APP_URL: process.env.NEXT_PUBLIC_APP_URL || "http://localhost:3000",
                OPENAI_API_KEY: process.env.OPENAI_API_KEY || "",
                PINECONE_API_KEY: process.env.PINECONE_API_KEY || "",
                PINECONE_ENVIRONMENT: process.env.PINECONE_ENVIRONMENT || "",
                PINECONE_INDEX_NAME: process.env.PINECONE_INDEX_NAME || "aven-knowledge-base",
                VAPI_API_KEY: process.env.VAPI_API_KEY || "",
                NEXT_PUBLIC_VAPI_PUBLIC_KEY: process.env.NEXT_PUBLIC_VAPI_PUBLIC_KEY || "",
                NEXT_PUBLIC_VAPI_ASSISTANT_ID: process.env.NEXT_PUBLIC_VAPI_ASSISTANT_ID || ""
            });
        }
        throw error;
    }
};
const env = validateEnv();
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/punycode [external] (punycode, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("punycode", () => require("punycode"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[externals]/string_decoder [external] (string_decoder, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("string_decoder", () => require("string_decoder"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/node:fs [external] (node:fs, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("node:fs", () => require("node:fs"));

module.exports = mod;
}}),
"[externals]/node:stream [external] (node:stream, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("node:stream", () => require("node:stream"));

module.exports = mod;
}}),
"[externals]/node:stream/web [external] (node:stream/web, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("node:stream/web", () => require("node:stream/web"));

module.exports = mod;
}}),
"[project]/src/lib/embeddings.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "chunkText": (()=>chunkText),
    "cosineSimilarity": (()=>cosineSimilarity),
    "createEmbedding": (()=>createEmbedding),
    "createEmbeddings": (()=>createEmbeddings),
    "generateResponse": (()=>generateResponse)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2f$env$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/config/env.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/utils/logger.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$openai$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/openai/index.mjs [app-route] (ecmascript) <locals>");
;
;
;
const logger = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Logger"]("Embeddings");
let openaiClient = null;
function getOpenAIClient() {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2f$env$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["env"].OPENAI_API_KEY) {
        logger.warn("OpenAI API key not configured");
        return null;
    }
    if (!openaiClient) {
        openaiClient = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$openai$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["default"]({
            apiKey: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2f$env$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["env"].OPENAI_API_KEY
        });
        logger.info("OpenAI client initialized");
    }
    return openaiClient;
}
async function createEmbedding(text) {
    const client = getOpenAIClient();
    if (!client) {
        logger.warn("Cannot create embedding - OpenAI client not available");
        return null;
    }
    try {
        const response = await client.embeddings.create({
            model: "text-embedding-ada-002",
            input: text
        });
        const embedding = response.data[0].embedding;
        logger.debug(`Created embedding for text (${text.length} chars)`);
        return embedding;
    } catch (error) {
        logger.error("Failed to create embedding", {
            error
        });
        return null;
    }
}
async function createEmbeddings(texts) {
    const client = getOpenAIClient();
    if (!client) {
        logger.warn("Cannot create embeddings - OpenAI client not available");
        return null;
    }
    try {
        const response = await client.embeddings.create({
            model: "text-embedding-ada-002",
            input: texts
        });
        const embeddings = response.data.map((item)=>item.embedding);
        logger.info(`Created ${embeddings.length} embeddings`);
        return embeddings;
    } catch (error) {
        logger.error("Failed to create embeddings", {
            error
        });
        return null;
    }
}
async function generateResponse(prompt, context, model = "gpt-4-turbo-preview") {
    const client = getOpenAIClient();
    if (!client) {
        logger.warn("Cannot generate response - OpenAI client not available");
        return null;
    }
    try {
        const systemMessage = `You are an AI customer support agent for Aven, a fintech company that helps people save money while paying off credit card debt. 
    Be helpful, professional, and empathetic. Use the provided context to answer questions accurately.
    If you don't have specific information, provide general guidance and suggest contacting Aven support.`;
        const messages = [
            {
                role: "system",
                content: systemMessage
            }
        ];
        if (context) {
            messages.push({
                role: "system",
                content: `Relevant information from our knowledge base:\n${context}`
            });
        }
        messages.push({
            role: "user",
            content: prompt
        });
        const response = await client.chat.completions.create({
            model,
            messages,
            temperature: 0.7,
            max_tokens: 500
        });
        const generatedText = response.choices[0].message.content;
        logger.debug("Generated response from OpenAI");
        return generatedText;
    } catch (error) {
        logger.error("Failed to generate response", {
            error
        });
        return null;
    }
}
function chunkText(text, maxLength = 1000) {
    const sentences = text.match(/[^.!?]+[.!?]+/g) || [
        text
    ];
    const chunks = [];
    let currentChunk = "";
    for (const sentence of sentences){
        if ((currentChunk + sentence).length <= maxLength) {
            currentChunk += sentence;
        } else {
            if (currentChunk) chunks.push(currentChunk.trim());
            currentChunk = sentence;
        }
    }
    if (currentChunk) chunks.push(currentChunk.trim());
    return chunks;
}
function cosineSimilarity(a, b) {
    if (a.length !== b.length) {
        throw new Error("Vectors must have the same length");
    }
    let dotProduct = 0;
    let normA = 0;
    let normB = 0;
    for(let i = 0; i < a.length; i++){
        dotProduct += a[i] * b[i];
        normA += a[i] * a[i];
        normB += b[i] * b[i];
    }
    return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));
}
}}),
"[project]/src/lib/pinecone.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "createIndex": (()=>createIndex),
    "deleteAllVectors": (()=>deleteAllVectors),
    "getIndex": (()=>getIndex),
    "getPineconeClient": (()=>getPineconeClient),
    "queryVectors": (()=>queryVectors),
    "upsertVectors": (()=>upsertVectors)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$pinecone$2d$database$2f$pinecone$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@pinecone-database/pinecone/dist/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2f$env$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/config/env.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/utils/logger.ts [app-route] (ecmascript)");
;
;
;
const logger = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Logger"]("Pinecone");
let pineconeClient = null;
async function getPineconeClient() {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2f$env$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["env"].PINECONE_API_KEY) {
        logger.warn("Pinecone API key not configured");
        return null;
    }
    if (!pineconeClient) {
        try {
            pineconeClient = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$pinecone$2d$database$2f$pinecone$2f$dist$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Pinecone"]({
                apiKey: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2f$env$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["env"].PINECONE_API_KEY
            });
            logger.info("Pinecone client initialized successfully");
        } catch (error) {
            logger.error("Failed to initialize Pinecone client", {
                error
            });
            return null;
        }
    }
    return pineconeClient;
}
async function getIndex(indexName) {
    const client = await getPineconeClient();
    if (!client) {
        throw new Error("Pinecone client not available");
    }
    const name = indexName || __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2f$env$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["env"].PINECONE_INDEX_NAME;
    try {
        const index = client.index(name);
        logger.info(`Connected to Pinecone index: ${name}`);
        return index;
    } catch (error) {
        logger.error(`Failed to connect to index ${name}`, {
            error
        });
        throw error;
    }
}
async function upsertVectors(vectors, indexName) {
    try {
        const index = await getIndex(indexName);
        const response = await index.upsert(vectors);
        logger.info(`Upserted ${vectors.length} vectors to Pinecone`);
        return response;
    } catch (error) {
        logger.error("Failed to upsert vectors", {
            error
        });
        throw error;
    }
}
async function queryVectors(queryVector, topK = 5, filter, indexName) {
    try {
        const index = await getIndex(indexName);
        const queryResponse = await index.query({
            vector: queryVector,
            topK,
            includeMetadata: true,
            filter
        });
        logger.info(`Queried Pinecone, found ${queryResponse.matches?.length || 0} matches`);
        return queryResponse;
    } catch (error) {
        logger.error("Failed to query vectors", {
            error
        });
        throw error;
    }
}
async function deleteAllVectors(indexName) {
    try {
        const index = await getIndex(indexName);
        await index.deleteAll();
        logger.info("Deleted all vectors from Pinecone index");
    } catch (error) {
        logger.error("Failed to delete vectors", {
            error
        });
        throw error;
    }
}
async function createIndex(indexName, dimension = 1536, metric = "cosine") {
    const client = await getPineconeClient();
    if (!client) {
        throw new Error("Pinecone client not available");
    }
    try {
        const indexes = await client.listIndexes();
        const indexExists = indexes.indexes?.some((index)=>index.name === indexName);
        if (indexExists) {
            logger.info(`Index ${indexName} already exists`);
            return;
        }
        await client.createIndex({
            name: indexName,
            dimension,
            metric,
            spec: {
                serverless: {
                    cloud: "aws",
                    region: "us-west-2"
                }
            }
        });
        logger.info(`Created Pinecone index: ${indexName}`);
        // Wait for index to be ready
        await new Promise((resolve)=>setTimeout(resolve, 5000));
    } catch (error) {
        logger.error(`Failed to create index ${indexName}`, {
            error
        });
        throw error;
    }
}
}}),
"[project]/src/lib/rag.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "generateRAGResponse": (()=>generateRAGResponse),
    "getSuggestedQuestions": (()=>getSuggestedQuestions),
    "initializeKnowledgeBase": (()=>initializeKnowledgeBase),
    "quickResponse": (()=>quickResponse),
    "searchContext": (()=>searchContext)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$data$2f$aven$2d$knowledge$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/data/aven-knowledge.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$embeddings$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/lib/embeddings.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$pinecone$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/lib/pinecone.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/utils/logger.ts [app-route] (ecmascript)");
;
;
;
;
const logger = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Logger"]("RAG");
async function initializeKnowledgeBase() {
    try {
        logger.info("Initializing Aven knowledge base in Pinecone");
        // Create index if it doesn't exist
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$pinecone$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createIndex"])("aven-knowledge-base");
        // Prepare vectors
        const vectors = [];
        for (const item of __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$data$2f$aven$2d$knowledge$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["avenKnowledgeBase"]){
            const embedding = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$embeddings$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createEmbedding"])(item.content);
            if (embedding) {
                vectors.push({
                    id: item.id,
                    values: embedding,
                    metadata: {
                        id: item.id,
                        text: item.content,
                        category: item.category || "general",
                        topic: item.topic || "general"
                    }
                });
            }
        }
        if (vectors.length > 0) {
            // Upsert vectors in batches to avoid rate limits
            const batchSize = 100;
            for(let i = 0; i < vectors.length; i += batchSize){
                const batch = vectors.slice(i, i + batchSize);
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$pinecone$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["upsertVectors"])(batch);
                logger.info(`Uploaded batch ${Math.floor(i / batchSize) + 1} of ${Math.ceil(vectors.length / batchSize)}`);
            }
            logger.info(`Successfully initialized knowledge base with ${vectors.length} vectors`);
        } else {
            logger.warn("No vectors to upload - check OpenAI configuration");
        }
        return vectors.length;
    } catch (error) {
        logger.error("Failed to initialize knowledge base", {
            error
        });
        throw error;
    }
}
async function searchContext(query, topK = 5) {
    try {
        // Create embedding for the query
        const queryEmbedding = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$embeddings$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createEmbedding"])(query);
        if (!queryEmbedding) {
            logger.warn("Could not create query embedding, falling back to text search");
            // Fallback to simple text search
            const results = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$data$2f$aven$2d$knowledge$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["avenKnowledgeBase"].filter((item)=>item.content.toLowerCase().includes(query.toLowerCase()) || item.topic.toLowerCase().includes(query.toLowerCase())).slice(0, topK).map((item)=>item.content);
            return results;
        }
        // Query Pinecone for similar vectors
        const searchResults = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$pinecone$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryVectors"])(queryEmbedding, topK);
        if (!searchResults.matches || searchResults.matches.length === 0) {
            logger.warn("No matches found in vector search");
            return [];
        }
        // Extract and return the text content
        const contexts = searchResults.matches.filter((match)=>match.metadata && match.score && match.score > 0.7).map((match)=>match.metadata.text);
        logger.info(`Found ${contexts.length} relevant contexts for query`);
        return contexts;
    } catch (error) {
        logger.error("Failed to search context", {
            error
        });
        // Fallback to local search
        return __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$data$2f$aven$2d$knowledge$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["avenKnowledgeBase"].filter((item)=>item.content.toLowerCase().includes(query.toLowerCase()) || item.topic.toLowerCase().includes(query.toLowerCase())).slice(0, topK).map((item)=>item.content);
    }
}
async function generateRAGResponse(userQuery, conversationHistory) {
    try {
        logger.info("Generating RAG response for user query");
        // Search for relevant context
        const contexts = await searchContext(userQuery, 5);
        // Combine contexts into a single string
        const contextString = contexts.length > 0 ? contexts.join("\n\n") : "No specific information found in knowledge base.";
        // Build conversation context
        let conversationContext = "";
        if (conversationHistory && conversationHistory.length > 0) {
            conversationContext = "\n\nPrevious conversation:\n" + conversationHistory.slice(-4).map((msg)=>`${msg.role}: ${msg.content}`).join("\n");
        }
        // Create the full prompt
        const fullPrompt = `User Question: ${userQuery}${conversationContext}`;
        // Generate response
        const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$embeddings$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateResponse"])(fullPrompt, contextString) || "I apologize, but I'm having trouble generating a response right now. Please try again or contact Aven support at 1-800-AVEN-HLP for immediate assistance.";
        logger.info("Successfully generated RAG response");
        return {
            response,
            contexts
        };
    } catch (error) {
        logger.error("Failed to generate RAG response", {
            error
        });
        return {
            response: "I apologize for the inconvenience. I'm experiencing technical difficulties. Please contact Aven support at 1-800-AVEN-HLP (1-800-283-6457) for assistance, or try again later.",
            contexts: []
        };
    }
}
async function quickResponse(query) {
    try {
        const { response } = await generateRAGResponse(query);
        return response;
    } catch (error) {
        logger.error("Failed to generate quick response", {
            error
        });
        return "I'm here to help! However, I'm experiencing some technical issues. Please contact Aven support at 1-800-AVEN-HLP for immediate assistance.";
    }
}
function getSuggestedQuestions(category) {
    const suggestions = {
        general: [
            "What is Aven and how does it work?",
            "How can I apply for an Aven credit card?",
            "What are the fees associated with Aven?",
            "How does the balance transfer work?",
            "What cashback rewards does Aven offer?"
        ],
        account: [
            "How do I check my balance?",
            "How can I make a payment?",
            "Can I increase my credit limit?",
            "How do I update my personal information?",
            "Where can I find my statements?"
        ],
        support: [
            "How do I report a lost or stolen card?",
            "How can I dispute a charge?",
            "What should I do if I'm having financial difficulties?",
            "How do I contact customer support?",
            "Is my information secure with Aven?"
        ],
        features: [
            "What debt management tools does Aven offer?",
            "How does the mobile app work?",
            "Can I set up automatic payments?",
            "What security features protect my account?",
            "How do I earn and redeem cashback?"
        ]
    };
    return suggestions[category] || suggestions.general;
}
}}),
"[project]/src/app/api/chat/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "POST": (()=>POST)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$rag$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/lib/rag.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/utils/logger.ts [app-route] (ecmascript)");
;
;
;
const logger = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$utils$2f$logger$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Logger"]("API:Chat");
async function POST(request) {
    try {
        const body = await request.json();
        const { message, history } = body;
        if (!message) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Message is required"
            }, {
                status: 400
            });
        }
        logger.info("Processing chat request", {
            message
        });
        // Generate response using RAG
        const { response, contexts } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$rag$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateRAGResponse"])(message, history);
        logger.info("Generated chat response", {
            responseLength: response.length,
            contextsCount: contexts.length
        });
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            response,
            contexts,
            timestamp: new Date().toISOString()
        });
    } catch (error) {
        logger.error("Chat API error", {
            error
        });
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Failed to process chat message",
            response: "I apologize, but I'm having trouble processing your request. Please try again or contact support at 1-800-AVEN-HLP."
        }, {
            status: 500
        });
    }
}
}}),
"[project]/ (server-utils)": ((__turbopack_context__) => {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, t: __turbopack_require_real__ } = __turbopack_context__;
{
}}),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__a59f05._.js.map